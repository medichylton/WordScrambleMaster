import{r as e,a as t,R as a}from"./vendor-DtX1tuCI.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var r={exports:{}},n={},o=e,l=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,c=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,a){var r,n={},o=null,i=null;for(r in void 0!==a&&(o=""+a),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(i=t.ref),t)s.call(t,r)&&!d.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:l,type:e,key:o,ref:i,props:n,_owner:c.current}}n.Fragment=i,n.jsx=p,n.jsxs=p,r.exports=n;var u=r.exports,h={},m=t;function g(e,t){var a,r;switch(t.type){case"START_GAME":const n={...e,gamePhase:"selectingChallenge",currentRound:1,totalScore:0,coins:10,powerUps:[],currentChallenge:null,isGameActive:!0,gameStarted:!0,difficulty:(null==(a=t.payload)?void 0:a.stake)||"apprentice",difficultyStake:(null==(r=t.payload)?void 0:r.stake)||"apprentice"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(n)),n;case"LOAD_GAME":return{...t.payload,gameStarted:!0,isGameActive:!0};case"SELECT_CHALLENGE":const o={...e,currentChallenge:t.payload.challenge||t.payload,gamePhase:"playingChallenge"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(o)),o;case"COMPLETE_CHALLENGE":const{score:l,coins:i}=t.payload,s={...e,totalScore:e.totalScore+l,coins:e.coins+i,gamePhase:"shopping"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(s)),s;case"PURCHASE_POWERUP":const c=t.payload;if(e.coins<c.cost)return e;const d={...e,coins:e.coins-c.cost,powerUps:[...e.powerUps,c]};return localStorage.setItem("wordScrambleGameState",JSON.stringify(d)),d;case"NEXT_ROUND":const p=e.currentRound+1;let u;return u=p>e.totalRounds?{...e,gamePhase:"victory"}:{...e,currentRound:p,gamePhase:"selectingChallenge"},localStorage.setItem("wordScrambleGameState",JSON.stringify(u)),u;case"GAME_OVER":const h={...e,gamePhase:"gameOver",isGameActive:!1};return localStorage.removeItem("wordScrambleGameState"),h;case"RESET_GAME":const m={currentRound:1,totalRounds:8,gamePhase:"menu",totalScore:0,coins:10,powerUps:[],currentChallenge:null,isGameActive:!1,difficulty:"apprentice",letterEnhancers:[],wordMultipliers:[],consumableBoosts:[],challengeProgress:{currentScore:0,wordsFound:[],timeRemaining:0,wordsRemaining:0,isCompleted:!1,bonusMultiplier:1,streakCount:0},isGameWon:!1,isGameLost:!1,difficultyStake:"apprentice",gameStarted:!1};return localStorage.removeItem("wordScrambleGameState"),m;case"SET_DIFFICULTY":return{...e,difficulty:t.payload};case"SUBMIT_WORD":case"USE_CONSUMABLE":default:return e;case"SKIP_CHALLENGE":const g={...e,gamePhase:"shopping"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(g)),g;case"PURCHASE_ITEM":const x=t.payload.item;if(e.coins<x.cost)return e;const y={...e,coins:e.coins-x.cost};return localStorage.setItem("wordScrambleGameState",JSON.stringify(y)),y;case"LEAVE_SHOP":const f={...e,gamePhase:"selectingChallenge"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(f)),f}}h.createRoot=m.createRoot,h.hydrateRoot=m.hydrateRoot;const x={currentRound:1,coins:10,totalScore:0,currentChallenge:null,letterEnhancers:[],wordMultipliers:[],consumableBoosts:[],challengeProgress:{currentScore:0,wordsFound:[],timeRemaining:0,wordsRemaining:0,isCompleted:!1,bonusMultiplier:1,streakCount:0},gamePhase:"menu",isGameWon:!1,isGameLost:!1,totalRounds:8,difficultyStake:"apprentice",gameStarted:!1,powerUps:[],isGameActive:!1,difficulty:"apprentice"},y=e.createContext(void 0);function f({children:t}){const[a,r]=e.useReducer(g,x),n={gameState:a,dispatch:r,startGame:e=>{r({type:"START_GAME",payload:{stake:e}})},selectChallenge:e=>{r({type:"SELECT_CHALLENGE",payload:{challenge:e}})},submitWord:(e,t,a)=>{r({type:"SUBMIT_WORD",payload:{word:e,positions:t,timeTaken:a}})},skipChallenge:e=>{r({type:"SKIP_CHALLENGE",payload:{challenge:e}})},purchaseItem:e=>a.coins>=e.cost&&(r({type:"PURCHASE_ITEM",payload:{item:e}}),!0),leaveShop:()=>{r({type:"LEAVE_SHOP"})},useConsumable:e=>{r({type:"USE_CONSUMABLE",payload:{boost:e}})},resetGame:()=>{r({type:"RESET_GAME"})}};return u.jsx(y.Provider,{value:n,children:t})}function v(){const t=e.useContext(y);if(void 0===t)throw new Error("useGame must be used within a GameProvider");return t}function w(){const{gameState:t,dispatch:a}=v(),[r,n]=e.useState(!1),[o,l]=e.useState(!1),i=null!==localStorage.getItem("wordScrambleGameState"),s=()=>{localStorage.removeItem("wordScrambleGameState"),a({type:"START_GAME"})};return u.jsxs("div",{className:"main-menu",children:[u.jsxs("div",{className:"menu-title",children:["WORD SCRAMBLE",u.jsx("br",{}),"MASTER"]}),u.jsxs("div",{className:"menu-options",children:[u.jsx("button",{onClick:s,className:"menu-button",children:"NEW GAME"}),i&&u.jsx("button",{onClick:()=>{const e=localStorage.getItem("wordScrambleGameState");if(e)try{const t=JSON.parse(e);a({type:"LOAD_GAME",payload:t})}catch(t){s()}else s()},className:"menu-button",children:"CONTINUE"}),u.jsx("button",{onClick:()=>n(!0),className:"menu-button",children:"HOW TO PLAY"}),u.jsx("button",{onClick:()=>l(!0),className:"menu-button",children:"SETTINGS"})]}),r&&u.jsx("div",{className:"modal-overlay",onClick:()=>n(!1),children:u.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[u.jsx("h2",{className:"modal-title",children:"HOW TO PLAY"}),u.jsxs("div",{style:{textAlign:"left",lineHeight:"1.4"},children:[u.jsxs("div",{style:{marginBottom:"12px"},children:[u.jsx("strong",{style:{color:"var(--pyxel-yellow)"},children:"OBJECTIVE:"}),u.jsx("br",{}),"Find words by connecting adjacent letters. Complete challenges to earn coins!"]}),u.jsxs("div",{style:{marginBottom:"12px"},children:[u.jsx("strong",{style:{color:"var(--pyxel-yellow)"},children:"CONTROLS:"}),u.jsx("br",{}),"• Tap letters to select",u.jsx("br",{}),"• Letters must be adjacent",u.jsx("br",{}),"• Tap SUBMIT to score word",u.jsx("br",{}),"• Words need 3+ letters"]}),u.jsxs("div",{style:{marginBottom:"12px"},children:[u.jsx("strong",{style:{color:"var(--pyxel-yellow)"},children:"SCORING:"}),u.jsx("br",{}),"• 3-4 letters: 1 point",u.jsx("br",{}),"• 5 letters: 2 points",u.jsx("br",{}),"• 6 letters: 3 points",u.jsx("br",{}),"• 7 letters: 5 points",u.jsx("br",{}),"• 8+ letters: 11 points"]})]}),u.jsx("button",{className:"modal-close",onClick:()=>n(!1),children:"CLOSE"})]})}),o&&u.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:u.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[u.jsx("h2",{className:"modal-title",children:"SETTINGS"}),u.jsxs("div",{children:[u.jsxs("div",{className:"settings-group",children:[u.jsx("div",{className:"settings-label",children:"DIFFICULTY"}),u.jsx(b,{})]}),u.jsxs("div",{className:"settings-group",children:[u.jsx("div",{className:"settings-label",children:"SOUND"}),u.jsx(S,{})]}),u.jsxs("div",{className:"settings-group",children:[u.jsx("div",{className:"settings-label",children:"STATS"}),u.jsx(j,{})]})]}),u.jsx("button",{className:"modal-close",onClick:()=>l(!1),children:"CLOSE"})]})})]})}function b(){const[t,a]=e.useState(()=>localStorage.getItem("gameDifficulty")||"medium"),r=e=>{a(e),localStorage.setItem("gameDifficulty",e)};return u.jsxs("div",{className:"settings-options",children:[u.jsx("button",{className:"setting-option "+("easy"===t?"active":""),onClick:()=>r("easy"),children:"EASY"}),u.jsx("button",{className:"setting-option "+("medium"===t?"active":""),onClick:()=>r("medium"),children:"MEDIUM"}),u.jsx("button",{className:"setting-option "+("hard"===t?"active":""),onClick:()=>r("hard"),children:"HARD"})]})}function S(){const[t,a]=e.useState(()=>"false"!==localStorage.getItem("soundEnabled")),r=e=>{a(e),localStorage.setItem("soundEnabled",e.toString())};return u.jsxs("div",{className:"settings-options",children:[u.jsx("button",{className:"setting-option "+(t?"active":""),onClick:()=>r(!0),children:"ON"}),u.jsx("button",{className:"setting-option "+(t?"":"active"),onClick:()=>r(!1),children:"OFF"})]})}function j(){const e={gamesPlayed:parseInt(localStorage.getItem("gamesPlayed")||"0"),totalScore:parseInt(localStorage.getItem("totalScore")||"0"),wordsFound:parseInt(localStorage.getItem("wordsFound")||"0"),longestWord:localStorage.getItem("longestWord")||"NONE"};return u.jsxs("div",{style:{fontSize:"clamp(5px, 1.5vw, 7px)",lineHeight:"1.6"},children:[u.jsxs("div",{children:["GAMES: ",e.gamesPlayed]}),u.jsxs("div",{children:["SCORE: ",e.totalScore]}),u.jsxs("div",{children:["WORDS: ",e.wordsFound]}),u.jsxs("div",{children:["LONGEST: ",e.longestWord]})]})}const k=new Set(["aa","ab","ad","ae","ag","ah","ai","al","am","an","ar","as","at","aw","ax","ay","ba","be","bi","bo","by","da","de","do","ed","ef","eh","el","em","en","er","es","et","ex","fa","fe","go","ha","he","hi","hm","ho","id","if","in","is","it","jo","ka","ki","la","li","lo","ma","me","mi","mm","mo","mu","my","na","ne","no","nu","od","oe","of","oh","oi","ok","om","on","op","or","os","ow","ox","oy","pa","pe","pi","qi","re","sh","si","so","ta","ti","to","uh","um","un","up","us","ut","we","wo","xi","xu","ya","ye","yo","za","the","and","for","are","but","not","you","all","can","had","her","was","one","our","out","day","get","has","him","his","how","man","new","now","old","see","two","way","who","boy","did","its","let","put","say","she","too","use","cat","dog","run","big","red","top","hot","cut","yes","try","ask","own","sit","eat","far","sea","eye","car","got","lot","yet","arm","off","bad","bag","bed","box","buy","cup","end","few","fun","gun","job","key","kid","law","leg","lie","map","pay","pop","sun","tax","war","win","bit","die","due","ear","egg","fly","gas","hit","ice","joy","log","mix","oil","pan","pie","row","sad","sky","tip","toy","web","zoo","age","air","art","bee","bet","bus","cry","dry","fat","fix","god","hug","ink","jam","lap","mad","net","oak","pet","rat","set","tap","van","wet","zip","eel","peel","feel","reel","heel","keel","teel","bell","cell","dell","fell","hell","jell","sell","tell","well","yell","ball","call","fall","gall","hall","mall","pall","tall","wall","bill","dill","fill","gill","hill","kill","mill","pill","sill","till","will","bull","cull","dull","full","gull","hull","lull","mull","null","pull","that","with","have","this","will","your","from","they","know","want","been","good","much","some","time","very","when","come","here","just","like","long","make","many","over","such","take","than","them","well","were","what","year","work","back","call","came","each","even","find","give","hand","high","keep","kind","last","left","life","live","look","made","most","move","must","name","need","next","open","part","play","said","same","seem","show","side","tell","turn","used","ways","week","went","word","book","case","door","face","fact","game","girl","help","home","hope","hour","idea","line","list","love","mind","news","only","page","plan","read","real","room","seen","sort","talk","team","test","then","tree","true","walk","wall","wife","yard","able","area","army","away","baby","ball","band","bank","base","beat","best","bill","bird","blue","boat","body","born","both","boys","busy","care","cars","city","club","cold","cool","cost","dark","data","days","dead","deal","dear","does","done","down","drop","drug","easy","else","eyes","fall","fast","feel","feet","fell","felt","file","fill","film","fire","fish","five","food","foot","form","four","free","full","gave","gets","goes","gold","gone","grew","grow","guys","half","hall","hard","head","hear","held","hell","hide","hold","hole","holy","huge","hurt","jobs","join","jump","june","kept","kids","kill","knew","land","late","lead","less","lies","live","load","loan","lock","lose","loss","lost","lots","luck","mail","main","male","mark","mass","mean","meet","miss","mode","moon","near","neck","nice","nine","none","nose","note","okay","once","park","pass","past","path","pick","pink","plus","poll","pool","poor","push","race","rain","rate","rich","ride","ring","rise","risk","rock","role","roll","rule","runs","safe","sale","save","seat","sell","send","sent","ship","shop","shot","sick","sign","size","skin","slip","slow","snow","soft","soil","sold","song","soon","soul","spot","star","stay","step","stop","sure","task","tend","term","text","thin","tied","ties","till","tiny","told","tone","took","tool","tops","town","trip","unit","upon","user","vary","vast","vote","wage","wait","wake","warm","wash","wave","ways","weak","wear","west","wide","wild","wind","wine","wins","wire","wise","wish","wood","wore","worn","yeah","zone","about","after","again","alone","along","among","being","below","could","doing","every","first","found","great","group","house","large","might","never","other","place","right","small","sound","still","these","think","three","under","water","where","which","while","world","would","write","young","above","admit","agree","ahead","alive","allow","anger","angry","apart","apple","apply","arena","argue","arise","armed","array","aside","asset","avoid","awake","award","aware","badly","basic","beach","began","begin","belly","bench","birth","black","blame","blank","blind","block","blood","board","boost","booth","bound","brain","brand","brave","bread","break","breed","brief","bring","broad","broke","brown","build","built","buyer","cable","catch","cause","chain","chair","chaos","charm","chart","chase","cheap","check","chest","child","china","chose","civil","claim","class","clean","clear","click","climb","clock","close","cloud","coach","coast","count","court","cover","craft","crash","crazy","cream","crime","cross","crowd","crown","crude","curve","cycle","daily","dance","dated","dealt","death","debut","delay","depth","doubt","dozen","draft","drama","drank","dream","dress","drill","drink","drive","drove","dying","eager","early","earth","eight","elite","empty","enemy","enjoy","enter","entry","equal","error","event","exact","exist","extra","faith","false","fault","fiber","field","fifth","fifty","fight","final","fixed","flash","fleet","floor","fluid","focus","force","forth","forty","forum","frame","frank","fraud","fresh","front","fruit","fully","funny","giant","given","glass","globe","going","grace","grade","grand","grant","grass","grave","green","gross","grown","guard","guess","guest","guide","happy","heart","heavy","hence","horse","hotel","human","hurry","image","index","inner","input","issue","japan","joint","judge","known","label","laser","later","laugh","layer","learn","lease","least","leave","legal","level","light","limit","links","lives","local","loose","lower","lucky","lunch","lying","magic","major","maker","march","match","maybe","mayor","meant","media","metal","minor","minus","mixed","model","money","month","moral","motor","mount","mouse","mouth","moved","movie","music","needs","newly","night","noise","north","noted","novel","nurse","occur","ocean","offer","often","order","ought","paint","panel","paper","party","peace","phase","phone","photo","piano","piece","pilot","pitch","plain","plane","plant","plate","point","pound","power","press","price","pride","prime","print","prior","prize","proof","proud","prove","queen","quick","quiet","quite","radio","raise","range","rapid","ratio","reach","ready","realm","rebel","refer","relax","repay","reply","rigid","rival","river","robin","roger","roman","rough","round","route","royal","rural","scale","scene","scope","score","sense","serve","seven","shall","shape","share","sharp","sheet","shelf","shell","shift","shine","shirt","shock","shoot","short","shown","sides","sight","silly","since","sixth","sixty","sized","skill","sleep","slide","smart","smile","smith","smoke","snake","solid","solve","sorry","south","space","spare","speak","speed","spend","spent","split","spoke","sport","staff","stage","stake","stand","start","state","steam","steel","steep","steer","stick","stock","stone","stood","store","storm","story","strip","stuck","study","stuff","style","sugar","suite","super","sweet","swift","swing","swiss","table","taken","taste","taxes","teach","tends","terry","texas","thank","theft","their","theme","there","thick","thing","third","those","threw","throw","thumb","tight","tired","title","today","topic","total","touch","tough","tower","track","trade","train","treat","trend","trial","tribe","trick","tried","tries","truly","trunk","trust","truth","twice","twist","tyler","ultra","uncle","undue","union","unity","until","upper","upset","urban","usage","usual","valid","value","video","virus","visit","vital","vocal","voice","waste","watch","wheel","white","whole","whose","woman","women","worry","worse","worst","worth","write","wrong","wrote","yield","youth","should","around","through","during","follow","without","another","between","nothing","someone","something","because","before","against","thought","little","number","people","really","school","always","enough","almost","second","family","system","within","rather","across","change","course","action","figure","friend","ground","happen","better","cannot","common","create","degree","detail","either","father","finger","gather","govern","health","height","indeed","inside","itself","letter","listen","living","making","market","matter","member","method","middle","minute","modern","moment","mother","moving","nation","nature","nearly","notice","object","office","opened","option","others","parent","period","person","please","policy","pretty","public","reason","record","remain","remove","report","result","return","season","senior","simple","single","sister","social","source","spirit","spread","spring","square","street","strong","summer","supply","switch","taking","theory","things","though","thrown","toward","travel","trying","turned","unique","unless","unlike","update","useful","valley","volume","weight","winter","wonder","worked","worker","writer"]),E=new Map,C=new Map;let N=0;const I=[["A","A","E","E","G","N"],["E","L","R","T","T","Y"],["A","O","O","T","T","W"],["A","B","B","J","O","O"],["E","H","R","T","V","W"],["C","I","M","O","T","U"],["D","I","S","T","T","Y"],["E","I","O","S","S","T"],["D","E","L","R","V","Y"],["A","C","H","O","P","S"],["H","I","M","N","Q","U"],["E","E","I","N","S","U"],["E","E","G","H","N","W"],["A","F","F","K","P","S"],["H","L","N","N","R","Z"],["D","E","I","L","R","X"]];async function A(e){var t,a,r,n;if(e.length<2)return!1;const o=e.toLowerCase();if(E.has(o))return E.get(o);if(k.has(o))return E.set(o,!0),!0;const l=Date.now();l-N<100&&await new Promise(e=>setTimeout(e,100-(l-N))),N=Date.now();try{const e=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${o}`);if(e.ok){const l=await e.json();if(Array.isArray(l)&&l.length>0)return E.set(o,!0),(null==(n=null==(r=null==(a=null==(t=l[0].meanings)?void 0:t[0])?void 0:a.definitions)?void 0:r[0])?void 0:n.definition)&&C.set(o,l[0].meanings[0].definitions[0].definition),!0}return E.set(o,!1),!1}catch(i){const e=k.has(o);return E.set(o,e),e}}function R(){const e=[],t=[...I].sort(()=>Math.random()-.5);for(let a=0;a<4;a++){e[a]=[];for(let r=0;r<4;r++){const n=t[4*a+r],o=n[Math.floor(Math.random()*n.length)];e[a][r]="Q"===o?"QU":o}}return e}function O(e,t=1,a="medium"){const r=e.length;let n=0;if(r>=3&&r<=5)n=2;else if(6===r)n=3;else if(7===r)n=5;else{if(!(r>=8))return 0;n=11}const o={easy:1,medium:1.5,hard:2}[a],l=function(e){const t={A:1,E:1,I:1,O:1,U:1,L:1,N:1,S:1,T:1,R:1,D:2,G:2,B:3,C:3,M:3,P:3,F:4,H:4,V:4,W:4,Y:4,K:5,J:8,X:8,Q:10,Z:10};let a=0;for(const r of e.toUpperCase())"U"===r&&e.toUpperCase().includes("QU")||(a+=t[r]||1);return 1+a/e.length/10}(e),i=Math.floor(n*o*l*t);return Math.max(i,1)}function L(e,t){if(t.length<2)return!1;const a=new Set;for(let r=0;r<t.length;r++){const{row:n,col:o}=t[r];if(n<0||n>=e.length||o<0||o>=e[0].length)return!1;const l=`${n},${o}`;if(a.has(l))return!1;if(a.add(l),r>0){if(!T(t[r-1],{row:n,col:o}))return!1}}return!0}function T(e,t){const a=Math.abs(e.row-t.row),r=Math.abs(e.col-t.col);return a<=1&&r<=1&&!(0===a&&0===r)}async function M(){try{const e="test";if(await A(e)){return{success:!0,message:`API working! "${e}" is valid. Definition: ${await async function(e){var t,a,r,n;const o=e.toLowerCase();if(C.has(o))return C.get(o);try{const e=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${o}`);if(e.ok){const l=await e.json();if(Array.isArray(l)&&l.length>0&&(null==(n=null==(r=null==(a=null==(t=l[0].meanings)?void 0:t[0])?void 0:a.definitions)?void 0:r[0])?void 0:n.definition)){const e=l[0].meanings[0].definitions[0].definition;return C.set(o,e),e}}return null}catch(l){return null}}(e)||"No definition available"}`}}return{success:!1,message:"API responded but word validation failed"}}catch(e){return{success:!1,message:`API test failed: ${e instanceof Error?e.message:"Unknown error"}`}}}function G({onWordFound:t,onScoreUpdate:a,onCurrentWordChange:r,timeRemaining:n,hideWordDisplay:o=!1,foundWords:l=[]}){const[i,s]=e.useState([]),[c,d]=e.useState([]),[p,h]=e.useState(""),[m,g]=e.useState([]),[x,y]=e.useState(!1),[f,v]=e.useState("unknown"),[w,b]=e.useState([]),S=l.length>0?l:m;e.useEffect(()=>{s(R())},[]),e.useEffect(()=>{if(c.length>0){const e=function(e,t){return t.map(({row:t,col:a})=>e[t][a]).join("").toLowerCase()}(i,c);if(h(e),null==r||r(e),!L(i,c))return void v("invalid");if(e.length>=3)if(S.includes(e))v("already-found");else{const t=function(e){if(e.length<2)return!1;const t=e.toLowerCase();return E.has(t)?E.get(t):!!k.has(t)||null}(e);!0===t?v("valid"):!1===t?v("invalid"):(v("checking"),A(e).then(e=>{v(e?"valid":"invalid")}))}else v("unknown")}else h(""),v("unknown"),null==r||r("")},[c,i,r,S]);const j=(e,t)=>{const a=document.elementFromPoint(e,t);if(a&&a.classList.contains("letter-cell")){return{row:parseInt(a.getAttribute("data-row")||"0"),col:parseInt(a.getAttribute("data-col")||"0")}}return null},C=async()=>{if(p.length>=3&&!S.includes(p)){if(!L(i,c))return void(navigator.vibrate&&navigator.vibrate(100));let e=!1;if(e="checking"===f?await A(p):"valid"===f,e){const e=O(p,n>60?1.5:n>30?1.2:1),r={word:p,path:[...c],score:e,timestamp:Date.now()};b(e=>[...e,r]),0===l.length&&g([...m,p]),t(p,e),a(e),navigator.vibrate&&navigator.vibrate([50,50,50])}else navigator.vibrate&&navigator.vibrate(100)}};return u.jsxs("div",{className:"letter-grid-container",children:[!o&&u.jsxs("div",{className:`current-word ${(()=>{if(p.length<3)return"";if(c.length>0&&!L(i,c))return"invalid";switch(f){case"valid":return"valid";case"invalid":return"invalid";case"checking":return"checking";case"already-found":return"already-found";default:return""}})()}`,children:[p||"Swipe to form words...","checking"===f&&u.jsx("span",{style:{marginLeft:"8px",fontSize:"8px"},children:"⏳"}),c.length>0&&!L(i,c)&&u.jsx("span",{style:{marginLeft:"8px",fontSize:"8px",color:"var(--pyxel-red)"},children:"❌"})]}),u.jsx("div",{className:"letter-grid",onTouchStart:e=>{e.preventDefault();const t=e.touches[0],a=j(t.clientX,t.clientY);a&&(y(!0),d([a]),navigator.vibrate&&navigator.vibrate(10))},onTouchMove:e=>{if(e.preventDefault(),!x)return;const t=e.touches[0],a=j(t.clientX,t.clientY);if(!a)return;const r=c.findIndex(e=>e.row===a.row&&e.col===a.col);if(-1!==r)d(c.slice(0,r+1));else if(c.length>0){T(c[c.length-1],a)&&(d([...c,a]),navigator.vibrate&&navigator.vibrate(5))}},onTouchEnd:async e=>{e.preventDefault(),x&&(y(!1),await C(),d([]))},onMouseUp:async()=>{x&&(y(!1),await C(),d([]))},children:i.map((e,t)=>e.map((e,a)=>{const r=((e,t)=>c.some(a=>a.row===e&&a.col===t))(t,a),n=((e,t)=>{const a=c.findIndex(a=>a.row===e&&a.col===t);return-1!==a&&a<c.length-1})(t,a),o=((e,t)=>{const a=c.findIndex(a=>a.row===e&&a.col===t);return-1!==a?a+1:0})(t,a);return u.jsxs("div",{className:`letter-cell ${r?"selected":""} ${n?"path":""}`,"data-row":t,"data-col":a,onMouseDown:()=>((e,t)=>{y(!0),d([{row:e,col:t}])})(t,a),onMouseEnter:()=>((e,t)=>{if(!x)return;const a={row:e,col:t},r=c.findIndex(a=>a.row===e&&a.col===t);-1!==r?d(c.slice(0,r+1)):c.length>0&&T(c[c.length-1],a)&&d([...c,a])})(t,a),children:[e,o>0&&u.jsx("div",{className:"selection-order",children:o})]},`${t}-${a}`)}))}),u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{onClick:async()=>{p.length>=3&&!S.includes(p)&&await C(),d([]),h(""),v("unknown")},className:"action-button",disabled:p.length<3||S.includes(p)||"invalid"===f||c.length>0&&!L(i,c),children:"SUBMIT"}),u.jsx("button",{onClick:()=>{d([]),y(!1),h(""),v("unknown")},className:"action-button",children:"CLEAR"}),u.jsx("button",{onClick:()=>{s(R()),0===l.length&&g([]),d([]),h(""),v("unknown"),b([])},className:"action-button",children:"SHUFFLE"})]}),S.length>0&&u.jsxs("div",{className:"found-words",children:[u.jsxs("div",{style:{color:"var(--pyxel-yellow)",fontSize:"clamp(8px, 2vw, 10px)",marginBottom:"8px",textAlign:"center",fontWeight:"bold"},children:["FOUND WORDS (",S.length,")"]}),S.map((e,t)=>u.jsxs("div",{className:"word-item",children:[u.jsx("span",{children:e.toUpperCase()}),u.jsxs("span",{style:{color:"var(--pyxel-yellow)"},children:[O(e,1),"pts"]})]},t))]}),!1]})}function P(){const{gameState:e,resetGame:t,selectChallenge:a,dispatch:r}=v();return u.jsxs("div",{className:"game-interface",children:["selectingChallenge"===e.gamePhase&&u.jsx(U,{}),"playingChallenge"===e.gamePhase&&u.jsx(z,{}),"gameOver"===e.gamePhase&&u.jsx(W,{}),"victory"===e.gamePhase&&u.jsx(_,{})]})}function U(){const{selectChallenge:t}=v(),[a,r]=e.useState("");return u.jsxs("div",{style:{padding:"20px",textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",background:"var(--gradient-primary)",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:"10%",left:"10%",width:"20px",height:"20px",background:"var(--pyxel-yellow)",borderRadius:"50%",animation:"pixelFloat 3s ease-in-out infinite",opacity:.6}}),u.jsx("div",{style:{position:"absolute",top:"20%",right:"15%",width:"15px",height:"15px",background:"var(--pyxel-green)",borderRadius:"50%",animation:"pixelFloat 4s ease-in-out infinite reverse",opacity:.6}}),u.jsx("div",{style:{position:"absolute",bottom:"15%",left:"20%",width:"18px",height:"18px",background:"var(--pyxel-pink)",borderRadius:"50%",animation:"pixelFloat 3.5s ease-in-out infinite",opacity:.6}}),u.jsx("div",{className:"modal-title",style:{marginBottom:"30px",fontSize:"clamp(14px, 5vw, 20px)",animation:"titlePulse 2s ease-in-out infinite"},children:"🎮 CHOOSE YOUR CHALLENGE 🎮"}),u.jsx("div",{className:"difficulty-select",style:{zIndex:1,position:"relative"},children:[{type:"quick",name:"QUICK BLITZ",description:"Fast-paced word hunting",icon:"⚡",targetScore:300,timeLimit:90,coinReward:15,color:"var(--pyxel-yellow)"},{type:"standard",name:"WORD MASTER",description:"Balanced challenge",icon:"🎯",targetScore:500,timeLimit:120,coinReward:25,color:"var(--pyxel-blue)"},{type:"boss",name:"ULTIMATE TEST",description:"Maximum difficulty",icon:"👑",targetScore:800,timeLimit:180,coinReward:50,color:"var(--pyxel-red)"}].map((e,n)=>u.jsxs("div",{className:"difficulty-button "+(a===e.type?"selected":""),onClick:()=>{r(e.type),setTimeout(()=>(e=>{const a={id:`${e.type}-${Date.now()}`,type:e.type,name:e.name,description:e.description,targetScore:e.targetScore,maxWords:"quick"===e.type?15:"standard"===e.type?25:35,timeLimit:e.timeLimit,coinReward:e.coinReward,specialRule:null,canSkip:!0};t(a)})(e),200)},style:{background:a===e.type?"var(--glow-green)":"var(--gradient-secondary)",borderColor:e.color,position:"relative",overflow:"hidden",animationDelay:.1*n+"s"},children:[u.jsx("div",{style:{fontSize:"20px",marginBottom:"8px",filter:"drop-shadow(2px 2px 0px rgba(0,0,0,0.5))"},children:e.icon}),u.jsx("div",{style:{fontSize:"clamp(10px, 3vw, 12px)",marginBottom:"4px"},children:e.name}),u.jsx("div",{style:{fontSize:"clamp(6px, 2vw, 8px)",opacity:.8,marginBottom:"8px"},children:e.description}),u.jsxs("div",{style:{fontSize:"clamp(6px, 2vw, 8px)",display:"flex",justifyContent:"space-between",width:"100%",opacity:.9},children:[u.jsxs("span",{children:["🎯 ",e.targetScore,"pts"]}),u.jsxs("span",{children:["⏱️ ",Math.floor(e.timeLimit/60),":",(e.timeLimit%60).toString().padStart(2,"0")]}),u.jsxs("span",{children:["💰 ",e.coinReward]})]}),u.jsx("div",{style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)",transition:"left 0.5s",pointerEvents:"none"}})]},e.type))})]})}function z(){var t,a,r;const{gameState:n,dispatch:o}=v(),[l,i]=e.useState(0),[s,c]=e.useState((null==(t=n.currentChallenge)?void 0:t.timeLimit)||120),[d,p]=e.useState([]),[h,m]=e.useState(""),[g,x]=e.useState(null);e.useEffect(()=>{const e=setInterval(()=>{c(e=>e<=1?(y(),0):e-1)},1e3);return()=>clearInterval(e)},[]);const y=()=>{var e,t;const a=(null==(e=n.currentChallenge)?void 0:e.targetScore)||500,r=(null==(t=n.currentChallenge)?void 0:t.coinReward)||20;o(l>=a?{type:"COMPLETE_CHALLENGE",payload:{score:l,coins:r+Math.floor(l/100)}}:{type:"GAME_OVER"})},f=()=>s>60?"var(--pyxel-green)":s>30?"var(--pyxel-yellow)":"var(--pyxel-red)",w=()=>{var e;const t=(null==(e=n.currentChallenge)?void 0:e.targetScore)||500;return Math.min(l/t*100,100)};return u.jsxs("div",{style:{width:"100vw",height:"100vh",display:"flex",flexDirection:"column",background:"var(--pyxel-black)",position:"fixed",top:0,left:0,overflow:"hidden"},children:[u.jsxs("div",{style:{height:"50px",background:"var(--gradient-primary)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",borderBottom:"3px solid var(--pyxel-dark-grey)",zIndex:2,flexShrink:0},children:[u.jsxs("div",{style:{fontSize:"clamp(8px, 2vw, 10px)",color:"var(--pyxel-light-grey)",width:"80px",textAlign:"left"},children:["💰 ",n.coins]}),u.jsxs("div",{style:{position:"relative",fontSize:"clamp(16px, 5vw, 24px)",color:"var(--pyxel-yellow)",fontWeight:"bold",textShadow:"2px 2px 4px var(--pyxel-black), 0 0 10px var(--pyxel-yellow)",textAlign:"center",minWidth:"100px"},children:[l,g&&u.jsxs("div",{style:{position:"absolute",top:"-30px",right:"-10px",color:"var(--glow-green)",fontSize:"clamp(12px, 3vw, 16px)",animation:"scoreBonus 1s ease-out forwards",pointerEvents:"none",textShadow:"0 0 10px var(--glow-green)"},children:["+",g]})]}),u.jsxs("div",{style:{fontSize:"clamp(8px, 2vw, 10px)",color:"var(--pyxel-light-grey)",width:"80px",textAlign:"right"},children:["🎯 ",null==(a=n.currentChallenge)?void 0:a.targetScore]})]}),u.jsx("div",{style:{height:"45px",background:"var(--pyxel-dark-blue)",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"2px solid var(--pyxel-dark-grey)",zIndex:2,overflow:"hidden",flexShrink:0},children:u.jsxs("div",{className:`current-word ${h.length>=2?d.includes(h)?"already-found":h.length>=2?"valid":"":""} ${(e=>{const t=e.length;return t>=8?"super-long-word":7===t?"long-word":6===t?"medium-word":t>=3?"short-word":""})(h)}`,style:{fontSize:"clamp(12px, 4vw, 18px)",fontWeight:"bold",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"90%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[h||"Swipe to form words...",h.length>=3&&u.jsxs("span",{style:{marginLeft:"8px",fontSize:"clamp(8px, 2vw, 10px)",opacity:.8,color:h.length>=8?"var(--glow-pink)":7===h.length?"var(--glow-green)":6===h.length?"var(--pyxel-yellow)":"var(--pyxel-orange)",flexShrink:0},children:["(",h.length,")"]})]})}),u.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",zIndex:1,minHeight:0},children:u.jsx(G,{onWordFound:(e,t)=>{p(t=>[...t,e]),i(e=>e+t),x(t);setTimeout(()=>x(null),t>=11?1500:t>=5?1200:1e3)},onScoreUpdate:e=>{},onCurrentWordChange:e=>{m(e)},timeRemaining:s,hideWordDisplay:!0,foundWords:d})}),u.jsxs("div",{style:{height:"80px",background:"var(--gradient-primary)",display:"flex",alignItems:"center",justifyContent:"space-around",padding:"12px 16px",borderTop:"3px solid var(--pyxel-dark-grey)",zIndex:2,flexShrink:0},children:[u.jsxs("div",{style:{textAlign:"center",flex:1},children:[u.jsx("div",{style:{fontSize:"clamp(6px, 1.5vw, 8px)",color:"var(--pyxel-light-grey)",marginBottom:"4px"},children:"CHALLENGE"}),u.jsx("div",{style:{fontSize:"clamp(8px, 2vw, 10px)",color:"var(--pyxel-yellow)",fontWeight:"bold"},children:(null==(r=n.currentChallenge)?void 0:r.name)||"CHALLENGE"})]}),u.jsxs("div",{style:{textAlign:"center",flex:2},children:[u.jsxs("div",{style:{fontSize:"clamp(6px, 1.5vw, 8px)",color:"var(--pyxel-light-grey)",marginBottom:"4px"},children:["PROGRESS ",Math.round(w()),"%"]}),u.jsx("div",{style:{width:"100%",height:"12px",background:"var(--pyxel-dark-grey)",border:"2px solid var(--pyxel-light-grey)",borderRadius:"6px",position:"relative",overflow:"hidden"},children:u.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${w()}%`,background:w()>=100?"var(--glow-green)":"linear-gradient(to right, var(--pyxel-red), var(--pyxel-orange), var(--pyxel-yellow), var(--pyxel-green))",transition:"width 0.5s ease",borderRadius:"4px",boxShadow:w()>=100?"0 0 10px var(--glow-green)":"0 0 5px rgba(255,236,39,0.5)"}})})]}),u.jsxs("div",{style:{textAlign:"center",flex:1},children:[u.jsx("div",{style:{fontSize:"clamp(6px, 1.5vw, 8px)",color:"var(--pyxel-light-grey)",marginBottom:"4px"},children:"WORDS"}),u.jsx("div",{style:{fontSize:"clamp(10px, 2.5vw, 12px)",color:"var(--pyxel-green)",fontWeight:"bold"},children:d.length})]}),u.jsxs("div",{style:{textAlign:"center",flex:1},children:[u.jsx("div",{style:{fontSize:"clamp(6px, 1.5vw, 8px)",color:"var(--pyxel-light-grey)",marginBottom:"4px"},children:"TIME"}),u.jsx("div",{style:{fontSize:"clamp(8px, 2vw, 10px)",color:f(),fontWeight:"bold",textShadow:`0 0 8px ${f()}`},children:D(s)})]})]}),g&&u.jsxs("div",{style:{position:"fixed",top:"30px",right:"calc(50% - 40px)",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:100},children:[u.jsxs("div",{className:(b=g,b>=11?"score-bonus-large":b>=5?"score-bonus-medium":"score-bonus-small"),style:{fontSize:g>=11?"clamp(16px, 4vw, 20px)":g>=5?"clamp(14px, 3.5vw, 18px)":"clamp(12px, 3vw, 16px)",fontWeight:"bold",textShadow:"2px 2px 4px var(--pyxel-black)"},children:["+",g,g>=11&&"🎉",g>=5&&g<11&&"⭐"]}),[...Array(g>=11?8:g>=5?6:4)].map((e,t)=>u.jsx("div",{style:{position:"absolute",width:g>=11?"8px":"6px",height:g>=11?"8px":"6px",background:g>=11?"var(--glow-pink)":g>=5?"var(--pyxel-yellow)":"var(--glow-green)",borderRadius:"50%",animation:`particle${t} ${g>=11?1.5:g>=5?1.2:1}s ease-out forwards`,animationDelay:.1*t+"s",boxShadow:"0 0 4px "+(g>=11?"var(--glow-pink)":g>=5?"var(--pyxel-yellow)":"var(--glow-green)")}},t))]})]});var b}function W(){var e;const{resetGame:t,gameState:a}=v();return u.jsxs("div",{className:"game-over",style:{background:"var(--gradient-primary)",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{fontSize:"48px",marginBottom:"20px",animation:"sadFace 2s ease-in-out infinite"},children:"😞"}),u.jsx("div",{className:"game-over-title",style:{color:"var(--pyxel-red)",textShadow:"3px 3px 0px var(--pyxel-dark-purple), 6px 6px 0px rgba(0,0,0,0.8)"},children:"GAME OVER"}),u.jsx("div",{className:"final-score",style:{marginBottom:"20px"},children:"Better luck next time!"}),u.jsxs("div",{style:{fontSize:"clamp(8px, 2.5vw, 10px)",color:"var(--pyxel-light-grey)",marginBottom:"30px",opacity:.8},children:["You needed ",null==(e=a.currentChallenge)?void 0:e.targetScore," points to win"]}),u.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[u.jsx("button",{onClick:t,className:"menu-button",style:{background:"var(--gradient-accent)",borderColor:"var(--pyxel-red)"},children:"🔄 TRY AGAIN"}),u.jsx("button",{onClick:()=>window.location.reload(),className:"menu-button",style:{background:"var(--gradient-secondary)",borderColor:"var(--pyxel-blue)"},children:"🏠 MAIN MENU"})]})]})}function _(){var t;const{gameState:a,resetGame:r}=v(),[n,o]=e.useState(!0);return e.useEffect(()=>{const e=setTimeout(()=>o(!1),3e3);return()=>clearTimeout(e)},[]),u.jsxs("div",{className:"game-over",style:{background:"var(--gradient-primary)",position:"relative",overflow:"hidden"},children:[n&&u.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},children:[...Array(20)].map((e,t)=>u.jsx("div",{style:{position:"absolute",width:"8px",height:"8px",background:["var(--pyxel-yellow)","var(--pyxel-green)","var(--pyxel-pink)","var(--pyxel-blue)"][t%4],left:100*Math.random()+"%",animation:"confetti 3s ease-out forwards",animationDelay:2*Math.random()+"s"}},t))}),u.jsx("div",{style:{fontSize:"64px",marginBottom:"20px",animation:"trophy 2s ease-in-out infinite"},children:"🏆"}),u.jsx("div",{className:"game-over-title",style:{color:"var(--glow-green)",textShadow:"3px 3px 0px var(--pyxel-dark-green), 6px 6px 0px rgba(0,0,0,0.8)"},children:"VICTORY!"}),u.jsx("div",{className:"final-score",children:"🎉 Challenge Complete! 🎉"}),u.jsxs("div",{style:{fontSize:"clamp(10px, 3vw, 12px)",margin:"20px 0",color:"var(--pyxel-yellow)",textShadow:"0 0 8px var(--pyxel-yellow)"},children:["💰 COINS EARNED: ",(null==(t=a.currentChallenge)?void 0:t.coinReward)||20]}),u.jsx("div",{style:{fontSize:"clamp(8px, 2.5vw, 10px)",color:"var(--pyxel-light-grey)",marginBottom:"30px",opacity:.8},children:"Ready for the next challenge?"}),u.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[u.jsx("button",{onClick:r,className:"menu-button",style:{background:"var(--glow-green)",color:"var(--pyxel-black)",borderColor:"var(--pyxel-yellow)"},children:"🚀 CONTINUE"}),u.jsx("button",{onClick:()=>window.location.reload(),className:"menu-button",style:{background:"var(--gradient-secondary)",borderColor:"var(--pyxel-blue)"},children:"🏠 MAIN MENU"})]})]})}function D(e){return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`}function B(){const{gameState:t}=v();return e.useEffect(()=>{M().then(e=>{}),document.documentElement.setAttribute("data-theme","retro")},[]),t.gameStarted&&"menu"!==t.gamePhase?u.jsx("div",{className:"game-screen crt-effect",children:u.jsx("div",{className:"pixel-container",children:u.jsx(P,{})})}):u.jsx("div",{className:"game-screen crt-effect",children:u.jsx("div",{className:"pixel-container",children:u.jsx(w,{})})})}function F(){return u.jsx("div",{className:"app",children:u.jsx(f,{children:u.jsx(B,{})})})}h.createRoot(document.getElementById("root")).render(u.jsx(a.StrictMode,{children:u.jsx(F,{})}));
