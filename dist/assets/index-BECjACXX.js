import{r as e,a as t,R as o}from"./vendor-DtX1tuCI.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var n={exports:{}},r={},i=e,a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,o){var n,r={},i=null,s=null;for(n in void 0!==o&&(i=""+o),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(s=t.ref),t)l.call(t,n)&&!d.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===r[n]&&(r[n]=t[n]);return{$$typeof:a,type:e,key:i,ref:s,props:r,_owner:c.current}}r.Fragment=s,r.jsx=p,r.jsxs=p,n.exports=r;var u=n.exports,m={},f=t;function h(e,t){var o,n,r,i,a,s;switch(t.type){case"START_GAME":const l={...e,gamePhase:"selectingChallenge",currentRound:1,currentLevel:1,totalScore:0,coins:15,powerUps:[],currentChallenge:null,isGameActive:!0,gameStarted:!0,difficulty:(null==(o=t.payload)?void 0:o.stake)||"apprentice",difficultyStake:(null==(n=t.payload)?void 0:n.stake)||"apprentice"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(l)),l;case"START_NEW_RUN":const c=t.payload.stake,d={...e,currentRun:e.currentRun+1,currentLevel:1,totalScore:0,coins:15,runStartTime:Date.now(),gamePhase:"selectingChallenge",currentChallenge:null,isGameActive:!0,gameStarted:!0,difficulty:c,difficultyStake:c,powerUps:e.inventory.map(e=>({...e,cost:e.sellValue}))};return localStorage.setItem("wordScrambleGameState",JSON.stringify(d)),d;case"LOAD_GAME":return{...t.payload,gameStarted:!0,isGameActive:!0};case"SELECT_CHALLENGE":const p={...e,currentChallenge:t.payload.challenge||t.payload,gamePhase:"playingChallenge"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(p)),p;case"COMPLETE_CHALLENGE":const{score:u,coins:m}=t.payload,f={...e,totalScore:e.totalScore+u,coins:e.coins+m,lifetimeCoins:e.lifetimeCoins+m,gamePhase:"shopping"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(f)),f;case"COMPLETE_LEVEL":const h=t.payload,g=e.currentLevel+1;if(g>e.maxLevel){const t={...e,totalScore:e.totalScore+h.score,coins:e.coins+h.coins,lifetimeCoins:e.lifetimeCoins+h.coins,gamePhase:"runComplete"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(t)),t}{const t={...e,currentLevel:g,totalScore:e.totalScore+h.score,coins:e.coins+h.coins,lifetimeCoins:e.lifetimeCoins+h.coins,gamePhase:"shopping"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(t)),t}case"NEXT_LEVEL":const x={...e,gamePhase:"selectingChallenge"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(x)),x;case"COMPLETE_RUN":t.payload;const y={...e,gamePhase:"runSelection",isGameActive:!1};return localStorage.setItem("wordScrambleGameState",JSON.stringify(y)),y;case"PURCHASE_INVENTORY_ITEM":const b=t.payload.item;if(e.coins<b.cost)return e;const v=e.inventory.findIndex(e=>e.id===b.id);let w;v>=0?(w=[...e.inventory],w[v]={...w[v],stackCount:w[v].stackCount+1}):w=[...e.inventory,{...b,purchaseLevel:e.currentLevel,timesUsed:0,stackCount:1}];const S={...e,coins:e.coins-b.cost,inventory:w,powerUps:w.map(e=>({...e,cost:e.sellValue}))};return localStorage.setItem("wordScrambleGameState",JSON.stringify(S)),S;case"SELL_INVENTORY_ITEM":const F=t.payload.itemId,k=e.inventory.find(e=>e.id===F);if(!k)return e;let j;j=k.stackCount>1?e.inventory.map(e=>e.id===F?{...e,stackCount:e.stackCount-1}:e):e.inventory.filter(e=>e.id!==F);const C={...e,coins:e.coins+k.sellValue,inventory:j,powerUps:j.map(e=>({...e,cost:e.sellValue}))};return localStorage.setItem("wordScrambleGameState",JSON.stringify(C)),C;case"PURCHASE_POWERUP":const B=t.payload;if(e.coins<B.cost)return e;const E={...e,coins:e.coins-B.cost,powerUps:[...e.powerUps,B]};return localStorage.setItem("wordScrambleGameState",JSON.stringify(E)),E;case"SPEND_COINS":const M=t.payload;if(e.coins<M)return e;const L={...e,coins:e.coins-M};return localStorage.setItem("wordScrambleGameState",JSON.stringify(L)),L;case"NEXT_ROUND":const P=e.currentRound+1;let W;return W=P>e.totalRounds?{...e,gamePhase:"victory"}:{...e,currentRound:P,gamePhase:"selectingChallenge"},localStorage.setItem("wordScrambleGameState",JSON.stringify(W)),W;case"GAME_OVER":const N={...e,gamePhase:"gameOver",isGameActive:!1};return localStorage.removeItem("wordScrambleGameState"),N;case"RESET_GAME":const A={currentRun:1,currentLevel:1,maxLevel:15,runStartTime:Date.now(),inventory:[],coins:15,totalScore:0,lifetimeCoins:0,currentChallenge:null,challengeProgress:{currentScore:0,wordsFound:[],timeRemaining:0,wordsRemaining:0,isCompleted:!1,bonusMultiplier:1,streakCount:0},gamePhase:"menu",isGameWon:!1,isGameLost:!1,difficultyStake:"apprentice",gameStarted:!1,isGameActive:!1,currentRound:1,letterEnhancers:[],wordMultipliers:[],consumableBoosts:[],totalRounds:15,powerUps:[],difficulty:"apprentice"};return localStorage.removeItem("wordScrambleGameState"),A;case"SET_DIFFICULTY":return{...e,difficulty:t.payload};case"SUBMIT_WORD":const{word:I,positions:R,timeTaken:T}=t.payload;let O=10*I.length;const z=e.inventory.map(e=>({id:e.id,name:e.name,description:e.description,rarity:e.rarity,effect:e.effect}));let G=O,D=0,U=[];if(z.length>0){const{applyPowerCardEffects:t}=require("../utils/powerCardEffects"),o=t(I,O,{currentWord:I,currentScore:O,totalScore:e.totalScore,wordsFound:(null==(r=e.challengeProgress)?void 0:r.wordsFound)||[],timeRemaining:(null==(i=e.challengeProgress)?void 0:i.timeRemaining)||0,grid:[],coins:e.coins,activePerks:z,level:e.currentLevel});G=Math.floor(O*o.scoreModifier),D=o.coinBonus,U=o.messages}const _={...e.challengeProgress,currentScore:((null==(a=e.challengeProgress)?void 0:a.currentScore)||0)+G,wordsFound:[...(null==(s=e.challengeProgress)?void 0:s.wordsFound)||[],I]},V={...e,challengeProgress:_,coins:e.coins+D,lastWordEffects:U};return localStorage.setItem("wordScrambleGameState",JSON.stringify(V)),V;case"SKIP_CHALLENGE":const H={...e,gamePhase:"shopping"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(H)),H;case"PURCHASE_ITEM":const $=t.payload.item;if(e.coins<$.cost)return e;const J={...e,coins:e.coins-$.cost};return localStorage.setItem("wordScrambleGameState",JSON.stringify(J)),J;case"LEAVE_SHOP":const q={...e,gamePhase:"selectingChallenge"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(q)),q;case"USE_CONSUMABLE":default:return e;case"SKIP_LEVEL":const{level:Y,perk:K}=t.payload,X=Y+1;if(X>e.maxLevel){const t={...e,gamePhase:"runComplete"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(t)),t}{const t={...e,currentLevel:X,activePerks:[...e.activePerks||[],K],gamePhase:"shopping"};return localStorage.setItem("wordScrambleGameState",JSON.stringify(t)),t}}}m.createRoot=f.createRoot,m.hydrateRoot=f.hydrateRoot;const g={currentRun:1,currentLevel:1,maxLevel:15,runStartTime:Date.now(),inventory:[],activePerks:[],coins:15,totalScore:0,lifetimeCoins:0,currentChallenge:null,challengeProgress:{currentScore:0,wordsFound:[],timeRemaining:0,wordsRemaining:0,isCompleted:!1,bonusMultiplier:1,streakCount:0},gamePhase:"menu",isGameWon:!1,isGameLost:!1,difficultyStake:"apprentice",gameStarted:!1,isGameActive:!1,currentRound:1,letterEnhancers:[],wordMultipliers:[],consumableBoosts:[],totalRounds:15,powerUps:[],difficulty:"apprentice"},x=e.createContext(void 0);function y({children:t}){const[o,n]=e.useReducer(h,g),r={gameState:o,dispatch:n,startGame:e=>{n({type:"START_GAME",payload:{stake:e}})},startNewRun:e=>{n({type:"START_NEW_RUN",payload:{stake:e}})},selectChallenge:e=>{n({type:"SELECT_CHALLENGE",payload:{challenge:e}})},submitWord:(e,t,o)=>{n({type:"SUBMIT_WORD",payload:{word:e,positions:t,timeTaken:o}})},skipChallenge:e=>{n({type:"SKIP_CHALLENGE",payload:{challenge:e}})},purchaseItem:e=>o.coins>=e.cost&&(n({type:"PURCHASE_ITEM",payload:{item:e}}),!0),purchaseInventoryItem:e=>o.coins>=e.cost&&(n({type:"PURCHASE_INVENTORY_ITEM",payload:{item:e}}),!0),sellInventoryItem:e=>!!o.inventory.find(t=>t.id===e)&&(n({type:"SELL_INVENTORY_ITEM",payload:{itemId:e}}),!0),leaveShop:()=>{n({type:"LEAVE_SHOP"})},useConsumable:e=>{n({type:"USE_CONSUMABLE",payload:{boost:e}})},resetGame:()=>{n({type:"RESET_GAME"})}};return u.jsx(x.Provider,{value:r,children:t})}const b={crtEffect:!0,blackWhiteMode:!1,animations:!0,difficulty:"apprentice",autoSave:!0,soundEffects:!0,backgroundMusic:!1,retroMode:!1,screenShake:!0},v=e.createContext(void 0),w=({children:t})=>{const[o,n]=e.useState(()=>{const e=localStorage.getItem("gameSettings");if(e)try{const t=JSON.parse(e);return{...b,...t}}catch(t){}return b});e.useEffect(()=>{localStorage.setItem("gameSettings",JSON.stringify(o)),r(o)},[o]);const r=e=>{const t=document.documentElement;e.blackWhiteMode?(t.style.setProperty("--color-bg","#000000"),t.style.setProperty("--color-text","#ffffff"),t.style.setProperty("--color-accent","#888888"),t.setAttribute("data-color-scheme","monochrome")):(t.style.setProperty("--color-bg","#9BBB0F"),t.style.setProperty("--color-text","#0F380F"),t.style.setProperty("--color-accent","#8BAC0F"),t.removeAttribute("data-color-scheme")),e.crtEffect?(t.style.setProperty("--crt-effect","block"),t.setAttribute("data-crt","1")):(t.style.setProperty("--crt-effect","none"),t.removeAttribute("data-crt")),e.animations?(t.style.setProperty("--animations-enabled","1"),t.setAttribute("data-animations","1")):(t.style.setProperty("--animations-enabled","0"),t.setAttribute("data-animations","0")),e.retroMode?(t.setAttribute("data-retro","1"),t.style.setProperty("--pixel-perfect","pixelated")):(t.removeAttribute("data-retro"),t.style.setProperty("--pixel-perfect","auto")),e.screenShake?t.setAttribute("data-screen-shake","1"):t.removeAttribute("data-screen-shake")};return u.jsx(v.Provider,{value:{settings:o,updateSetting:(e,t)=>{n(o=>({...o,[e]:t}))},updateSettings:e=>{n(t=>({...t,...e}))},resetSettings:()=>{n(b)}},children:t})};function S(){const t=e.useContext(x);if(void 0===t)throw new Error("useGame must be used within a GameProvider");return t}function F({onClose:t}){const{settings:o,updateSettings:n}=(()=>{const t=e.useContext(v);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t})(),r=(e,t)=>{n({[e]:t})};return u.jsx("div",{className:"gb-modal",children:u.jsxs("div",{className:"gb-modal-content",style:{background:"#9BBB0F",border:"4px solid #0F380F",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",borderBottom:"2px solid #0F380F",paddingBottom:"16px"},children:[u.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#0F380F",margin:0,textTransform:"uppercase",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace"},children:"Settings"}),u.jsx("button",{onClick:t,style:{background:"transparent",border:"none",fontSize:"24px",color:"#0F380F",cursor:"pointer",fontWeight:"bold"},children:"✕"})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[u.jsxs("div",{style:{background:"#8BAC0F",border:"2px solid #0F380F",padding:"16px"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"bold",color:"#0F380F",margin:"0 0 16px 0",textTransform:"uppercase"},children:"Display"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[u.jsx("label",{style:{fontSize:"14px",fontWeight:"bold",color:"#0F380F"},children:"CRT Screen Effect"}),u.jsx("button",{onClick:()=>r("crtEffect",!o.crtEffect),style:{background:o.crtEffect?"#0F380F":"#9BBB0F",color:o.crtEffect?"#9BBB0F":"#0F380F",border:"2px solid #0F380F",padding:"6px 12px",fontSize:"12px",fontWeight:"bold",cursor:"pointer"},children:o.crtEffect?"ON":"OFF"})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[u.jsx("label",{style:{fontSize:"14px",fontWeight:"bold",color:"#0F380F"},children:"Black & White Mode"}),u.jsx("button",{onClick:()=>r("blackWhiteMode",!o.blackWhiteMode),style:{background:o.blackWhiteMode?"#0F380F":"#9BBB0F",color:o.blackWhiteMode?"#9BBB0F":"#0F380F",border:"2px solid #0F380F",padding:"6px 12px",fontSize:"12px",fontWeight:"bold",cursor:"pointer"},children:o.blackWhiteMode?"ON":"OFF"})]})]}),u.jsxs("div",{style:{background:"#8BAC0F",border:"2px solid #0F380F",padding:"16px"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"bold",color:"#0F380F",margin:"0 0 16px 0",textTransform:"uppercase"},children:"Gameplay"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[u.jsx("label",{style:{fontSize:"14px",fontWeight:"bold",color:"#0F380F"},children:"Animations"}),u.jsx("button",{onClick:()=>r("animations",!o.animations),style:{background:o.animations?"#0F380F":"#9BBB0F",color:o.animations?"#9BBB0F":"#0F380F",border:"2px solid #0F380F",padding:"6px 12px",fontSize:"12px",fontWeight:"bold",cursor:"pointer"},children:o.animations?"ON":"OFF"})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[u.jsx("label",{style:{fontSize:"14px",fontWeight:"bold",color:"#0F380F"},children:"Default Difficulty"}),u.jsxs("select",{value:o.difficulty,onChange:e=>r("difficulty",e.target.value),style:{background:"#9BBB0F",color:"#0F380F",border:"2px solid #0F380F",padding:"6px 8px",fontSize:"12px",fontWeight:"bold",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace"},children:[u.jsx("option",{value:"apprentice",children:"Apprentice"}),u.jsx("option",{value:"scholar",children:"Scholar"}),u.jsx("option",{value:"expert",children:"Expert"}),u.jsx("option",{value:"master",children:"Master"}),u.jsx("option",{value:"grandmaster",children:"Grandmaster"})]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("label",{style:{fontSize:"14px",fontWeight:"bold",color:"#0F380F"},children:"Auto-Save Progress"}),u.jsx("button",{onClick:()=>r("autoSave",!o.autoSave),style:{background:o.autoSave?"#0F380F":"#9BBB0F",color:o.autoSave?"#9BBB0F":"#0F380F",border:"2px solid #0F380F",padding:"6px 12px",fontSize:"12px",fontWeight:"bold",cursor:"pointer"},children:o.autoSave?"ON":"OFF"})]})]}),u.jsxs("div",{style:{background:"#8BAC0F",border:"2px solid #0F380F",padding:"16px"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"bold",color:"#0F380F",margin:"0 0 16px 0",textTransform:"uppercase"},children:"Audio"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[u.jsx("label",{style:{fontSize:"14px",fontWeight:"bold",color:"#0F380F"},children:"Sound Effects"}),u.jsx("button",{onClick:()=>r("soundEffects",!o.soundEffects),style:{background:o.soundEffects?"#0F380F":"#9BBB0F",color:o.soundEffects?"#9BBB0F":"#0F380F",border:"2px solid #0F380F",padding:"6px 12px",fontSize:"12px",fontWeight:"bold",cursor:"pointer"},children:o.soundEffects?"ON":"OFF"})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("label",{style:{fontSize:"14px",fontWeight:"bold",color:"#0F380F"},children:"Background Music"}),u.jsx("button",{onClick:()=>r("backgroundMusic",!o.backgroundMusic),style:{background:o.backgroundMusic?"#0F380F":"#9BBB0F",color:o.backgroundMusic?"#9BBB0F":"#0F380F",border:"2px solid #0F380F",padding:"6px 12px",fontSize:"12px",fontWeight:"bold",cursor:"pointer"},children:o.backgroundMusic?"ON":"OFF"})]})]}),u.jsxs("div",{style:{background:"#8BAC0F",border:"2px solid #0F380F",padding:"16px"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"bold",color:"#0F380F",margin:"0 0 16px 0",textTransform:"uppercase"},children:"Fun Tweaks"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[u.jsx("label",{style:{fontSize:"14px",fontWeight:"bold",color:"#0F380F"},children:"Retro Pixel Mode"}),u.jsx("button",{onClick:()=>r("retroMode",!o.retroMode),style:{background:o.retroMode?"#0F380F":"#9BBB0F",color:o.retroMode?"#9BBB0F":"#0F380F",border:"2px solid #0F380F",padding:"6px 12px",fontSize:"12px",fontWeight:"bold",cursor:"pointer"},children:o.retroMode?"ON":"OFF"})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("label",{style:{fontSize:"14px",fontWeight:"bold",color:"#0F380F"},children:"Screen Shake Effects"}),u.jsx("button",{onClick:()=>r("screenShake",!o.screenShake),style:{background:o.screenShake?"#0F380F":"#9BBB0F",color:o.screenShake?"#9BBB0F":"#0F380F",border:"2px solid #0F380F",padding:"6px 12px",fontSize:"12px",fontWeight:"bold",cursor:"pointer"},children:o.screenShake?"ON":"OFF"})]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",marginTop:"24px",borderTop:"2px solid #0F380F",paddingTop:"16px"},children:[u.jsx("button",{onClick:()=>{n({crtEffect:!0,blackWhiteMode:!1,animations:!0,difficulty:"apprentice",autoSave:!0,soundEffects:!0,backgroundMusic:!1,retroMode:!1,screenShake:!0})},className:"gb-button",style:{background:"#8BAC0F",color:"#0F380F",border:"2px solid #0F380F",padding:"12px 16px",fontSize:"14px",fontWeight:"bold",cursor:"pointer"},children:"Reset Defaults"}),u.jsx("button",{onClick:t,className:"gb-button",style:{background:"#0F380F",color:"#9BBB0F",border:"2px solid #0F380F",padding:"12px 16px",fontSize:"14px",fontWeight:"bold",cursor:"pointer"},children:"Close"})]})]})})}const k=()=>{const{gameState:t,startGame:o,resetGame:n}=S();e.useState(!1);const[r,i]=e.useState(!1);e.useEffect(()=>{const e=localStorage.getItem("wordScrambleGameState");if(e)try{const t=JSON.parse(e);t.gameStarted&&t.isGameActive}catch(t){localStorage.removeItem("wordScrambleGameState")}},[]);return u.jsxs("div",{style:{width:"100vw",height:"calc(var(--vh, 1vh) * 100)",background:"#9BBB0F",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",paddingTop:"calc(env(safe-area-inset-top, 0px) + 20px)",paddingBottom:"calc(20px + env(safe-area-inset-bottom, 0px))",position:"fixed",top:0,left:0,overflow:"hidden"},children:[u.jsxs("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#0F380F",textAlign:"center",marginBottom:"40px",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace",textTransform:"uppercase",lineHeight:1.2},children:["Word Scramble",u.jsx("br",{}),"Master"]}),u.jsxs("div",{style:{background:"#9BBB0F",border:"4px solid #0F380F",padding:"32px",display:"flex",flexDirection:"column",gap:"20px",minWidth:"300px",maxWidth:"400px",width:"100%"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",alignItems:"center"},children:[(()=>{const e=localStorage.getItem("wordScrambleGameState");if(!e)return!1;try{const t=JSON.parse(e);return t.gameStarted&&t.isGameActive}catch{return!1}})()&&u.jsx("button",{onClick:()=>{o(t.difficultyStake||"apprentice")},className:"gb-button",style:{width:"100%",background:"#0F380F",color:"#9BBB0F",border:"3px solid #0F380F",padding:"16px 24px",fontSize:"18px",fontWeight:"bold",textTransform:"uppercase",cursor:"pointer"},children:"Continue Game"}),u.jsx("button",{onClick:()=>{n(),o("apprentice")},className:"gb-button",style:{width:"100%",background:"#0F380F",color:"#9BBB0F",border:"3px solid #0F380F",padding:"16px 24px",fontSize:"18px",fontWeight:"bold",textTransform:"uppercase",cursor:"pointer"},children:"New Game"})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",alignItems:"center",marginTop:"20px"},children:[u.jsx("button",{onClick:()=>i(!0),className:"gb-button",style:{background:"#8BAC0F",color:"#0F380F",border:"2px solid #0F380F",padding:"12px 20px",fontSize:"16px",fontWeight:"bold",textTransform:"uppercase",cursor:"pointer"},children:"Settings"}),u.jsx("a",{href:"https://github.com/yourusername/wordscramblemaster",target:"_blank",rel:"noopener noreferrer",style:{color:"#0F380F",fontSize:"14px",fontWeight:"bold",textDecoration:"underline",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace",textTransform:"uppercase"},children:"Help & Info"})]}),t.lifetimeCoins>0&&u.jsxs("div",{style:{borderTop:"2px solid #0F380F",paddingTop:"16px",marginTop:"16px",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"14px",color:"#0F380F",fontWeight:"bold",marginBottom:"8px"},children:"Lifetime Stats"}),u.jsxs("div",{style:{fontSize:"12px",color:"#0F380F",fontWeight:"bold"},children:["Coins Earned: ◉ ",t.lifetimeCoins]}),u.jsxs("div",{style:{fontSize:"12px",color:"#0F380F",fontWeight:"bold"},children:["Current Run: ",t.currentRun]})]})]}),u.jsx("div",{style:{position:"absolute",bottom:"20px",fontSize:"10px",color:"#0F380F",fontWeight:"bold",opacity:.7},children:"v1.0.0 • Game Boy Edition"}),r&&u.jsx(F,{onClose:()=>i(!1)})]})};if("undefined"!=typeof document){const e=document.createElement("style");e.textContent="\n@keyframes gb-symbol-pulse {\n  0%, 100% { \n    transform: scale(1);\n    opacity: 1;\n  }\n  50% { \n    transform: scale(1.1);\n    opacity: 0.8;\n  }\n}\n",document.head.appendChild(e)}const j=new Set(["aa","ab","ad","ae","ag","ah","ai","al","am","an","ar","as","at","aw","ax","ay","ba","be","bi","bo","by","da","de","do","ed","ef","eh","el","em","en","er","es","et","ex","fa","fe","go","ha","he","hi","hm","ho","id","if","in","is","it","jo","ka","ki","la","li","lo","ma","me","mi","mm","mo","mu","my","na","ne","no","nu","od","oe","of","oh","oi","ok","om","on","op","or","os","ow","ox","oy","pa","pe","pi","qi","re","sh","si","so","ta","ti","to","uh","um","un","up","us","ut","we","wo","xi","xu","ya","ye","yo","za","the","and","for","are","but","not","you","all","can","had","her","was","one","our","out","day","get","has","him","his","how","man","new","now","old","see","two","way","who","boy","did","its","let","put","say","she","too","use","cat","dog","run","big","red","top","hot","cut","yes","try","ask","own","sit","eat","far","sea","eye","car","got","lot","yet","arm","off","bad","bag","bed","box","buy","cup","end","few","fun","gun","job","key","kid","law","leg","lie","map","pay","pop","sun","tax","war","win","bit","die","due","ear","egg","fly","gas","hit","ice","joy","log","mix","oil","pan","pie","row","sad","sky","tip","toy","web","zoo","age","air","art","bee","bet","bus","cry","dry","fat","fix","god","hug","ink","jam","lap","mad","net","oak","pet","rat","set","tap","van","wet","zip","eel","peel","feel","reel","heel","keel","teel","bell","cell","dell","fell","hell","jell","sell","tell","well","yell","ball","call","fall","gall","hall","mall","pall","tall","wall","bill","dill","fill","gill","hill","kill","mill","pill","sill","till","will","bull","cull","dull","full","gull","hull","lull","mull","null","pull","that","with","have","this","will","your","from","they","know","want","been","good","much","some","time","very","when","come","here","just","like","long","make","many","over","such","take","than","them","well","were","what","year","work","back","call","came","each","even","find","give","hand","high","keep","kind","last","left","life","live","look","made","most","move","must","name","need","next","open","part","play","said","same","seem","show","side","tell","turn","used","ways","week","went","word","book","case","door","face","fact","game","girl","help","home","hope","hour","idea","line","list","love","mind","news","only","page","plan","read","real","room","seen","sort","talk","team","test","then","tree","true","walk","wall","wife","yard","able","area","army","away","baby","ball","band","bank","base","beat","best","bill","bird","blue","boat","body","born","both","boys","busy","care","cars","city","club","cold","cool","cost","dark","data","days","dead","deal","dear","does","done","down","drop","drug","easy","else","eyes","fall","fast","feel","feet","fell","felt","file","fill","film","fire","fish","five","food","foot","form","four","free","full","gave","gets","goes","gold","gone","grew","grow","guys","half","hall","hard","head","hear","held","hell","hide","hold","hole","holy","huge","hurt","jobs","join","jump","june","kept","kids","kill","knew","land","late","lead","less","lies","live","load","loan","lock","lose","loss","lost","lots","luck","mail","main","male","mark","mass","mean","meet","miss","mode","moon","near","neck","nice","nine","none","nose","note","okay","once","park","pass","past","path","pick","pink","plus","poll","pool","poor","push","race","rain","rate","rich","ride","ring","rise","risk","rock","role","roll","rule","runs","safe","sale","save","seat","sell","send","sent","ship","shop","shot","sick","sign","size","skin","slip","slow","snow","soft","soil","sold","song","soon","soul","spot","star","stay","step","stop","sure","task","tend","term","text","thin","tied","ties","till","tiny","told","tone","took","tool","tops","town","trip","unit","upon","user","vary","vast","vote","wage","wait","wake","warm","wash","wave","ways","weak","wear","west","wide","wild","wind","wine","wins","wire","wise","wish","wood","wore","worn","yeah","zone","about","after","again","alone","along","among","being","below","could","doing","every","first","found","great","group","house","large","might","never","other","place","right","small","sound","still","these","think","three","under","water","where","which","while","world","would","write","young","above","admit","agree","ahead","alive","allow","anger","angry","apart","apple","apply","arena","argue","arise","armed","array","aside","asset","avoid","awake","award","aware","badly","basic","beach","began","begin","belly","bench","birth","black","blame","blank","blind","block","blood","board","boost","booth","bound","brain","brand","brave","bread","break","breed","brief","bring","broad","broke","brown","build","built","buyer","cable","catch","cause","chain","chair","chaos","charm","chart","chase","cheap","check","chest","child","china","chose","civil","claim","class","clean","clear","click","climb","clock","close","cloud","coach","coast","count","court","cover","craft","crash","crazy","cream","crime","cross","crowd","crown","crude","curve","cycle","daily","dance","dated","dealt","death","debut","delay","depth","doubt","dozen","draft","drama","drank","dream","dress","drill","drink","drive","drove","dying","eager","early","earth","eight","elite","empty","enemy","enjoy","enter","entry","equal","error","event","exact","exist","extra","faith","false","fault","fiber","field","fifth","fifty","fight","final","fixed","flash","fleet","floor","fluid","focus","force","forth","forty","forum","frame","frank","fraud","fresh","front","fruit","fully","funny","giant","given","glass","globe","going","grace","grade","grand","grant","grass","grave","green","gross","grown","guard","guess","guest","guide","happy","heart","heavy","hence","horse","hotel","human","hurry","image","index","inner","input","issue","japan","joint","judge","known","label","laser","later","laugh","layer","learn","lease","least","leave","legal","level","light","limit","links","lives","local","loose","lower","lucky","lunch","lying","magic","major","maker","march","match","maybe","mayor","meant","media","metal","minor","minus","mixed","model","money","month","moral","motor","mount","mouse","mouth","moved","movie","music","needs","newly","night","noise","north","noted","novel","nurse","occur","ocean","offer","often","order","ought","paint","panel","paper","party","peace","phase","phone","photo","piano","piece","pilot","pitch","plain","plane","plant","plate","point","pound","power","press","price","pride","prime","print","prior","prize","proof","proud","prove","queen","quick","quiet","quite","radio","raise","range","rapid","ratio","reach","ready","realm","rebel","refer","relax","repay","reply","rigid","rival","river","robin","roger","roman","rough","round","route","royal","rural","scale","scene","scope","score","sense","serve","seven","shall","shape","share","sharp","sheet","shelf","shell","shift","shine","shirt","shock","shoot","short","shown","sides","sight","silly","since","sixth","sixty","sized","skill","sleep","slide","smart","smile","smith","smoke","snake","solid","solve","sorry","south","space","spare","speak","speed","spend","spent","split","spoke","sport","staff","stage","stake","stand","start","state","steam","steel","steep","steer","stick","stock","stone","stood","store","storm","story","strip","stuck","study","stuff","style","sugar","suite","super","sweet","swift","swing","swiss","table","taken","taste","taxes","teach","tends","terry","texas","thank","theft","their","theme","there","thick","thing","third","those","threw","throw","thumb","tight","tired","title","today","topic","total","touch","tough","tower","track","trade","train","treat","trend","trial","tribe","trick","tried","tries","truly","trunk","trust","truth","twice","twist","tyler","ultra","uncle","undue","union","unity","until","upper","upset","urban","usage","usual","valid","value","video","virus","visit","vital","vocal","voice","waste","watch","wheel","white","whole","whose","woman","women","worry","worse","worst","worth","write","wrong","wrote","yield","youth","should","around","through","during","follow","without","another","between","nothing","someone","something","because","before","against","thought","little","number","people","really","school","always","enough","almost","second","family","system","within","rather","across","change","course","action","figure","friend","ground","happen","better","cannot","common","create","degree","detail","either","father","finger","gather","govern","health","height","indeed","inside","itself","letter","listen","living","making","market","matter","member","method","middle","minute","modern","moment","mother","moving","nation","nature","nearly","notice","object","office","opened","option","others","parent","period","person","please","policy","pretty","public","reason","record","remain","remove","report","result","return","season","senior","simple","single","sister","social","source","spirit","spread","spring","square","street","strong","summer","supply","switch","taking","theory","things","though","thrown","toward","travel","trying","turned","unique","unless","unlike","update","useful","valley","volume","weight","winter","wonder","worked","worker","writer"]),C=new Map,B=new Map;let E=0;async function M(e){var t,o,n,r;if(e.length<2)return!1;const i=e.toLowerCase();if(C.has(i))return C.get(i);if(j.has(i))return C.set(i,!0),!0;const a=Date.now();a-E<100&&await new Promise(e=>setTimeout(e,100-(a-E))),E=Date.now();try{const e=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${i}`);if(e.ok){const a=await e.json();if(Array.isArray(a)&&a.length>0)return C.set(i,!0),(null==(r=null==(n=null==(o=null==(t=a[0].meanings)?void 0:t[0])?void 0:o.definitions)?void 0:n[0])?void 0:r.definition)&&B.set(i,a[0].meanings[0].definitions[0].definition),!0}return C.set(i,!1),!1}catch(s){const e=j.has(i);return C.set(i,e),e}}function L(e,t){if(t.length<2)return!1;const o=new Set;for(let n=0;n<t.length;n++){const{row:r,col:i}=t[n];if(r<0||r>=e.length||i<0||i>=e[0].length)return!1;const a=`${r},${i}`;if(o.has(a))return!1;if(o.add(a),n>0){if(!P(t[n-1],{row:r,col:i}))return!1}}return!0}function P(e,t){const o=Math.abs(e.row-t.row),n=Math.abs(e.col-t.col);return o<=1&&n<=1&&!(0===o&&0===n)}async function W(){try{const e="test";if(await M(e)){return{success:!0,message:`API working! "${e}" is valid. Definition: ${await async function(e){var t,o,n,r;const i=e.toLowerCase();if(B.has(i))return B.get(i);try{const e=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${i}`);if(e.ok){const a=await e.json();if(Array.isArray(a)&&a.length>0&&(null==(r=null==(n=null==(o=null==(t=a[0].meanings)?void 0:t[0])?void 0:o.definitions)?void 0:n[0])?void 0:r.definition)){const e=a[0].meanings[0].definitions[0].definition;return B.set(i,e),e}}return null}catch(a){return null}}(e)||"No definition available"}`}}return{success:!1,message:"API responded but word validation failed"}}catch(e){return{success:!1,message:`API test failed: ${e instanceof Error?e.message:"Unknown error"}`}}}const N=e=>{const t=[{name:"Letter Alchemist",description:"Transform any letter into another",effect:{type:"letterTransform",enabled:!0}},{name:"Vowel Vampire",description:"Steal vowels from unused words",effect:{type:"vowelTheft",chance:.3}},{name:"Consonant Crusher",description:"Consonants worth 2x points",effect:{type:"consonantMultiplier",value:2}},{name:"Golden Vowels",description:"All vowels become golden (3x points)",effect:{type:"goldenVowels",enabled:!0}},{name:"Length Lord",description:"Each letter adds +5 points",effect:{type:"lengthBonus",value:5}},{name:"Short Stack",description:"2-3 letter words score 4x",effect:{type:"shortWordMultiplier",value:4}},{name:"Long Shot",description:"8+ letter words score 5x",effect:{type:"longWordMultiplier",value:5}},{name:"Perfect Length",description:"5-letter words score 10x",effect:{type:"perfectLength",value:10}},{name:"Time Warp",description:"+60 seconds to time limit",effect:{type:"timeBonus",seconds:60}},{name:"Speed Demon",description:"Fast words get 2x bonus",effect:{type:"speedBonus",multiplier:2}},{name:"Time Bank",description:"Unused time converts to coins",effect:{type:"timeToCoins",ratio:.1}},{name:"Frozen Time",description:"Time stops during word selection",effect:{type:"timeFreeze",enabled:!0}},{name:"Palindrome Prince",description:"Palindromes score 8x",effect:{type:"palindromeMultiplier",value:8}},{name:"Anagram King",description:"Anagrams score 6x",effect:{type:"anagramMultiplier",value:6}},{name:"Rhyme Master",description:"Rhyming words score 4x",effect:{type:"rhymeMultiplier",value:4}},{name:"Alliteration Ace",description:"Alliterations score 5x",effect:{type:"alliterationMultiplier",value:5}},{name:"Diagonal Dancer",description:"Diagonal moves worth 2x",effect:{type:"diagonalBonus",value:2}},{name:"Pathfinder",description:"Longest path gets bonus",effect:{type:"pathBonus",enabled:!0}},{name:"Grid Master",description:"Use entire grid for 3x bonus",effect:{type:"gridBonus",value:3}},{name:"Spiral Seeker",description:"Spiral patterns score 4x",effect:{type:"spiralBonus",value:4}},{name:"Score Doubler",description:"All scores doubled",effect:{type:"scoreMultiplier",value:2}},{name:"Chain Master",description:"Each consecutive word +10 points",effect:{type:"chainBonus",value:10}},{name:"Combo King",description:"Combos multiply scores",effect:{type:"comboMultiplier",enabled:!0}},{name:"Streak Seeker",description:"Streaks give exponential bonus",effect:{type:"streakBonus",enabled:!0}},{name:"Noun Hunter",description:"Nouns score 3x",effect:{type:"nounMultiplier",value:3}},{name:"Verb Virtuoso",description:"Verbs score 3x",effect:{type:"verbMultiplier",value:3}},{name:"Adjective Ace",description:"Adjectives score 3x",effect:{type:"adjectiveMultiplier",value:3}},{name:"Plural Power",description:"Plurals score 2x",effect:{type:"pluralMultiplier",value:2}},{name:"Word Echo",description:"25% chance to duplicate word",effect:{type:"wordEcho",chance:.25}},{name:"Letter God",description:"All letters become any letter",effect:{type:"letterGod",enabled:!0}},{name:"Infinite Loop",description:"Words can be found multiple times",effect:{type:"infiniteLoop",enabled:!0}},{name:"Reality Hack",description:"Break one game rule",effect:{type:"ruleBreaker",enabled:!0}},{name:"Coin Magnet",description:"+2 coins per word found",effect:{type:"coinPerWord",value:2}},{name:"Rich Words",description:"Long words give bonus coins",effect:{type:"wordToCoins",ratio:.5}},{name:"Investment Banker",description:"Coins multiply over time",effect:{type:"coinGrowth",enabled:!0}},{name:"Lucky Strike",description:"10% chance for +10 coins",effect:{type:"luckyCoins",chance:.1}},{name:"Synergy Master",description:"Matching power cards multiply",effect:{type:"synergyMultiplier",enabled:!0}},{name:"Power Collector",description:"Each power card adds +1x multiplier",effect:{type:"jokerMultiplier",enabled:!0}},{name:"Perfect Pair",description:"Paired power cards score 10x",effect:{type:"pairBonus",value:10}},{name:"Trinity Force",description:"Three power cards = 20x bonus",effect:{type:"trinityBonus",value:20}},{name:"Risk Taker",description:"Harder challenges = bigger rewards",effect:{type:"riskReward",enabled:!0}},{name:"Speed Runner",description:"Fast completion = bonus",effect:{type:"speedReward",enabled:!0}},{name:"Perfectionist",description:"Perfect score = 10x bonus",effect:{type:"perfectionBonus",value:10}},{name:"Underdog",description:"Low score = comeback bonus",effect:{type:"underdogBonus",enabled:!0}},{name:"Wild Card",description:"Any letter becomes wild",effect:{type:"wildCard",enabled:!0}},{name:"Power Wild",description:"Power cards become wild letters",effect:{type:"jokerWild",enabled:!0}},{name:"Chaos Theory",description:"Random effects each word",effect:{type:"chaosEffects",enabled:!0}},{name:"Quantum Leap",description:"Teleport to any letter",effect:{type:"quantumLeap",enabled:!0}},{name:"Meta Master",description:"Power cards affect other power cards",effect:{type:"metaJoker",enabled:!0}},{name:"Power Power",description:"Power cards can be power cards",effect:{type:"jokerJoker",enabled:!0}},{name:"Infinite Power",description:"Power cards multiply themselves",effect:{type:"infiniteJoker",enabled:!0}},{name:"Power God",description:"All power cards become legendary",effect:{type:"jokerGod",enabled:!0}}],o=t[Math.floor(Math.random()*t.length)];return{id:`${o.name.toLowerCase().replace(/\s+/g,"_")}_${Date.now()}`,name:o.name,description:o.description,effect:o.effect,levelAcquired:e}},A=e=>({"Letter Alchemist":"🔮","Vowel Vampire":"🧛","Consonant Crusher":"💪","Golden Vowels":"✨","Length Lord":"📏","Short Stack":"📦","Long Shot":"🎯","Perfect Length":"⭐","Time Warp":"⏰","Speed Demon":"⚡","Time Bank":"🏦","Frozen Time":"❄️","Palindrome Prince":"👑","Anagram King":"🎭","Rhyme Master":"🎵","Alliteration Ace":"🎪","Diagonal Dancer":"💃",Pathfinder:"🗺️","Grid Master":"🎮","Spiral Seeker":"🌀","Score Doubler":"🎲","Chain Master":"⛓️","Combo King":"👑","Streak Seeker":"🔥","Noun Hunter":"🏹","Verb Virtuoso":"🎭","Adjective Ace":"🎨","Plural Power":"📚","Word Echo":"🔄","Letter God":"👑","Infinite Loop":"♾️","Reality Hack":"💻","Coin Magnet":"🧲","Rich Words":"💰","Investment Banker":"🏛️","Lucky Strike":"🍀","Synergy Master":"🔗","Power Collector":"🃏","Perfect Pair":"💕","Trinity Force":"☯️","Risk Taker":"🎲","Speed Runner":"🏃",Perfectionist:"✨",Underdog:"🐕","Wild Card":"🃏","Power Wild":"🎭","Chaos Theory":"🌪️","Quantum Leap":"🚀","Meta Master":"🧠","Power Power":"🎪","Infinite Power":"♾️","Power God":"👑"}[e]||"🎯"),I=e=>{const t={vowelReduction:0,movementRestricted:!1,timeReduction:0,minWordLength:3,consonantBonus:0,palindromeBonus:1,speedRequirement:!1,gridSymmetry:!1,diagonalBlocked:!1,letterFrequencyShift:{}};switch(e%16){case 1:case 10:case 11:case 12:break;case 2:t.vowelReduction=.3;break;case 3:t.movementRestricted=!0,t.diagonalBlocked=!0;break;case 4:t.vowelReduction=.6,t.consonantBonus=5;break;case 5:t.timeReduction=30,t.speedRequirement=!0;break;case 6:t.minWordLength=4;break;case 7:t.diagonalBlocked=!0;break;case 8:t.gridSymmetry=!0;break;case 9:t.palindromeBonus=3;break;case 13:t.minWordLength=5;break;case 14:t.letterFrequencyShift={U:2,R:2,P:2};break;case 15:t.letterFrequencyShift={I:2,E:2,S:2};break;case 0:t.minWordLength=6}return t};function R({onWordFound:t,onScoreUpdate:o,onCurrentWordChange:n,timeRemaining:r,hideWordDisplay:i=!1,foundWords:a=[]}){var s,l;const{gameState:c}=S(),[d,p]=e.useState([]),[m,f]=e.useState([]),[h,g]=e.useState(""),[x,y]=e.useState([]),[b,v]=e.useState(!1),[w,F]=e.useState("unknown"),[k,B]=e.useState([]),[E,W]=e.useState(0),[N,A]=e.useState(new Set),[R,T]=e.useState(0),[O,z]=e.useState(null);e.useState(50);const G=a.length>0?a:x,D=c.powerUps.some(e=>"goldenLetters"===e.effect.type),U=c.powerUps.some(e=>"vowelBonus"===e.effect.type);c.powerUps.some(e=>"letterGod"===e.effect.type);const _=(null==(s=c.powerUps.find(e=>"chainMultiplier"===e.effect.type))?void 0:s.effect.value)||0,V=(null==(l=c.powerUps.find(e=>"letterMultiplier"===e.effect.type))?void 0:l.effect.value)||0,H=c.powerUps.find(e=>"longWordMultiplier"===e.effect.type),$=c.powerUps.find(e=>"exponentialGrowth"===e.effect.type);e.useEffect(()=>{var e;const t=(e=>{const t=I(e),o={A:8,B:2,C:3,D:4,E:12,F:2,G:3,H:2,I:9,J:1,K:1,L:4,M:2,N:6,O:8,P:2,Q:1,R:6,S:4,T:6,U:4,V:2,W:2,X:1,Y:2,Z:1};t.vowelReduction>0&&["A","E","I","O","U"].forEach(e=>{o[e]=Math.max(1,Math.floor(o[e]*(1-t.vowelReduction)))});Object.entries(t.letterFrequencyShift).forEach(([e,t])=>{o[e]=Math.floor(o[e]*t)});const n=[];Object.entries(o).forEach(([e,t])=>{for(let o=0;o<t;o++)n.push(e)});const r=[];for(let i=0;i<4;i++){r[i]=[];for(let e=0;e<4;e++){const t=Math.floor(Math.random()*n.length);r[i][e]=n[t]}}if(t.gridSymmetry)for(let i=0;i<4;i++)for(let e=0;e<4;e++)e>i&&(r[i][e]=r[e][i]);return r})(c.currentLevel);if(p(t),D){const o=(null==(e=c.powerUps.find(e=>"goldenLetters"===e.effect.type))?void 0:e.effect.count)||3,n=t.flat(),r=new Set;for(let e=0;e<o&&e<n.length;e++){const e=Math.floor(Math.random()*n.length);r.add(`${Math.floor(e/4)}-${e%4}`)}A(r)}},[D,c.currentLevel]),e.useEffect(()=>{if(m.length>0){const e=function(e,t){return t.map(({row:t,col:o})=>e[t][o]).join("").toLowerCase()}(d,m);if(g(e),null==n||n(e),!L(d,m))return void F("invalid");if(e.length>=2)if(G.includes(e))F("already-found");else{const t=function(e){if(e.length<2)return!1;const t=e.toLowerCase();return C.has(t)?C.get(t):!!j.has(t)||null}(e);!0===t?F("valid"):!1===t?F("invalid"):(F("checking"),M(e).then(e=>{F(e?"valid":"invalid")}))}else F("unknown")}else g(""),F("unknown"),null==n||n("")},[m,d,n,G]);const J=e=>{var t;let o=function(e,t=1,o="medium"){const n=e.length;let r=0;if(2===n)r=3;else if(n>=3&&n<=4)r=5;else if(5===n)r=8;else if(6===n)r=12;else if(7===n)r=18;else{if(!(n>=8))return 0;r=25}const i={easy:1.2,medium:1.5,hard:2}[o],a=function(e){const t={A:1,E:1,I:1,O:1,U:1,L:1,N:1,S:1,T:1,R:1,D:2,G:2,B:3,C:3,M:3,P:3,F:4,H:4,V:4,W:4,Y:4,K:5,J:8,X:8,Q:10,Z:10};let o=0;for(const n of e.toUpperCase())"U"===n&&e.toUpperCase().includes("QU")||(o+=t[n]||1);return 1+o/e.length/10}(e),s=Math.floor(r*i*a*t);return Math.max(s,3)}(e,r>60?1.5:r>30?1.2:1);if(o=((e,t,o)=>{const n=I(e);let r=o;if(t.length<n.minWordLength)return 0;n.consonantBonus>0&&(r+=t.split("").filter(e=>!"AEIOU".includes(e.toUpperCase())).length*n.consonantBonus);n.palindromeBonus>1&&t.toLowerCase()===t.toLowerCase().split("").reverse().join("")&&(r*=n.palindromeBonus);return n.speedRequirement&&(r*=1.2),Math.floor(r)})(c.currentLevel,e,o),0===o)return 0;if(V>0&&(o+=e.length*V),U){const n=(null==(t=c.powerUps.find(e=>"vowelBonus"===e.effect.type))?void 0:t.effect.value)||2;o+=e.split("").filter(e=>"aeiouAEIOU".includes(e)).length*n}_>0&&(o+=E*_),H&&e.length>=H.minLength&&(o*=H.multiplier);const n=m.filter(e=>N.has(`${e.row}-${e.col}`)).length;if(n>0&&(o*=1+2*n),$){o*=Math.pow($.multiplier,G.length)}return Math.round(o)},q=(e,t,o)=>{const n=ee(e,t),r=te(e,t),i=((e,t)=>N.has(`${e}-${t}`))(e,t),a=U&&(e=>"aeiouAEIOU".includes(e))(o);let s="#9BBB0F",l="#0F380F",c="3px solid #0F380F";return n?(s="#0F380F",l="#9BBB0F",c="3px solid #0F380F"):r?(s="#8BAC0F",l="#0F380F",c="3px solid #0F380F"):(i||a)&&(s="#8BAC0F",l="#0F380F",c="4px solid #0F380F"),{background:s,color:l,border:c,fontWeight:"bold"}},Y=(e,t)=>{const o=document.elementFromPoint(e,t);if(o&&o.hasAttribute("data-row")&&o.hasAttribute("data-col")){return{row:parseInt(o.getAttribute("data-row")||"0"),col:parseInt(o.getAttribute("data-col")||"0")}}return null},K=(e,t)=>{return o=e,n=t,Math.sqrt(Math.pow(o.row-n.row,2)+Math.pow(o.col-n.col,2))>=.5;var o,n},X=(e,t)=>{v(!0),f([{row:e,col:t}]),z({row:e,col:t})},Q=(e,t)=>{if(b){const o={row:e,col:t};if(m.length>0){const e=m[m.length-1];if(!((e,t,o)=>{const n=I(e),r=Math.abs(t.row-o.row),i=Math.abs(t.col-o.col);return!(r>1||i>1||n.diagonalBlocked&&1===r&&1===i||n.movementRestricted&&1===r&&1===i)})(c.currentLevel,e,o))return}const n=m.findIndex(o=>o.row===e&&o.col===t);-1===n?(0===m.length||P(m[m.length-1],o))&&f([...m,o]):n===m.length-2&&f(m.slice(0,-1))}},Z=async()=>{if(h.length>=2&&!G.includes(h)){if(!L(d,m))return void(navigator.vibrate&&navigator.vibrate(100));let e=!1;if(e="checking"===w?await M(h):"valid"===w,e){const e=J(h);_>0&&W(e=>e+1);const n={word:h,path:[...m],score:e,timestamp:Date.now()};B(e=>[...e,n]),0===a.length&&y([...x,h]),t(h,e),o(e),navigator.vibrate&&navigator.vibrate([50,50,50])}else navigator.vibrate&&navigator.vibrate(100)}},ee=(e,t)=>m.some(o=>o.row===e&&o.col===t),te=(e,t)=>{const o=m.findIndex(o=>o.row===e&&o.col===t);return-1!==o&&o<m.length-1};return u.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",padding:"24px",background:"#9BBB0F",border:"4px solid #0F380F",borderRadius:"0",position:"relative",touchAction:"none",userSelect:"none"},onTouchStart:e=>{e.preventDefault();const t=e.touches[0],o=Y(t.clientX,t.clientY);o&&(T(Date.now()),z(o),v(!0),f([o]),navigator.vibrate&&navigator.vibrate(10))},onTouchMove:e=>{if(e.preventDefault(),!b||!O)return;const t=e.touches[0],o=Y(t.clientX,t.clientY);if(!o)return;if(!K(O,o))return;const n=m.findIndex(e=>e.row===o.row&&e.col===o.col);if(-1!==n)f(m.slice(0,n+1));else if(m.length>0){P(m[m.length-1],o)&&(f([...m,o]),z(o),navigator.vibrate&&navigator.vibrate(5))}},onTouchEnd:async e=>{if(e.preventDefault(),!b)return;if(Date.now()-R<100&&1===m.length)return v(!1),f([]),void z(null);v(!1),z(null),await Z(),f([])},onMouseUp:async()=>{b&&(v(!1),z(null),await Z(),f([]))},children:d.map((e,t)=>e.map((e,o)=>{ee(t,o),te(t,o);const n=((e,t)=>{const o=m.findIndex(o=>o.row===e&&o.col===t);return-1!==o?o+1:0})(t,o),r=q(t,o,e);return u.jsxs("div",{"data-row":t,"data-col":o,style:{...r,width:"80px",height:"80px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"36px",fontWeight:"bold",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace",cursor:"pointer",userSelect:"none",textTransform:"uppercase",position:"relative"},onMouseDown:()=>X(t,o),onMouseEnter:()=>Q(t,o),onTouchStart:e=>{e.stopPropagation(),X(t,o)},children:[e,n>0&&u.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",fontSize:"14px",fontWeight:"bold",color:"#9BBB0F",background:"#0F380F",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #9BBB0F"},children:n})]},`${t}-${o}`)}))})})}function T(){const{gameState:e,resetGame:t,selectChallenge:o,dispatch:n}=S();return u.jsxs("div",{className:"game-interface",children:["selectingChallenge"===e.gamePhase&&u.jsx(O,{}),"playingChallenge"===e.gamePhase&&u.jsx(z,{}),"shopping"===e.gamePhase&&u.jsx(_,{}),"runComplete"===e.gamePhase&&u.jsx(U,{}),"gameOver"===e.gamePhase&&u.jsx(G,{}),"victory"===e.gamePhase&&u.jsx(D,{})]})}function O(){const{selectChallenge:t,gameState:o,dispatch:n}=S(),[r,i]=e.useState(""),[a,s]=e.useState(null),l=e=>{const t=o.currentLevel,n={apprentice:1,scholar:1.3,expert:1.6,master:2,grandmaster:2.5}[o.difficulty]||1;return Math.floor(e*Math.pow(1.15,t-1)*n)},c=e=>{const t=["WORD HUNT","VOWEL VOID","LETTER LOCKDOWN","CONSONANT CHAOS","TIME PRESSURE","LENGTH LIMIT","DIAGONAL DENIAL","SYMMETRY SEEKER","PALINDROME PUSH","ANAGRAM ATTACK","RHYME TIME","ALLITERATION ALLEY","SYLLABLE SURGE","PREFIX POWER","SUFFIX STORM","COMPOUND CRAZE"];return t[(e-1)%t.length]},d=e=>{const t=["Find words in the grid","Reduced vowel frequency","Restricted letter movement","Consonant-heavy grid","Shorter time limits","Minimum word length required","No diagonal connections","Symmetrical word patterns","Palindromes score bonus","Anagram challenges","Rhyming word pairs","Alliteration bonuses","Syllable counting","Prefix-focused words","Suffix combinations","Compound word building"];return t[(e-1)%t.length]},p=e=>{const t=[">>","AE","##","CC","||","LL","DD","SS","PP","AA","RR","AL","SY","PF","SF","CP"];return t[(e-1)%t.length]},m=e=>{const t=[["No time extensions","Limited word length bonus"],["30% fewer vowels","Vowels worth +1 point each"],["Can only move horizontally/vertically","No diagonal connections"],["80% consonants","Consonant chains required"],["Time limit reduced by 30s","Speed bonus required"],["Minimum 4-letter words only","Short words penalized"],["Grid movement restricted","Linear paths only"],["Words must be symmetrical","Pattern matching required"],["Palindromes score 3x","Other words penalized"],["Anagrams score bonus","Word scrambling required"],["Rhyming pairs bonus","Sound matching needed"],["Alliteration required","Same letter starts"],["Syllable counting","Complex word structures"],["Prefix-focused scoring","Word beginnings matter"],["Suffix combinations","Word endings important"],["Compound words only","Multi-word combinations"]];return t[(e-1)%t.length]},f=(()=>{const e=o.currentLevel,t=30+5*e,n=I(e),r=((e,t=120)=>t-I(e).timeReduction)(e,120);return{type:"standard",name:"WORD HUNT",description:"Find words in the grid",icon:">>",targetScore:l(t),timeLimit:r,coinReward:Math.floor(15+2*e),disadvantages:[n.vowelReduction>0?`${Math.round(100*n.vowelReduction)}% fewer vowels`:"",n.diagonalBlocked?"No diagonal connections":"",n.minWordLength>3?`Minimum ${n.minWordLength}-letter words`:"",n.timeReduction>0?`Time reduced by ${n.timeReduction}s`:"",n.consonantBonus>0?`Consonants worth +${n.consonantBonus} points`:"",n.palindromeBonus>1?`Palindromes worth ${n.palindromeBonus}x points`:""].filter(Boolean),skipPerk:N(o.currentLevel)}})(),h=(()=>{const e=[];for(let t=1;t<=3;t++){const n=o.currentLevel+t;if(n>o.maxLevel)break;const r=30+5*n;e.push({level:n,name:c(n),description:d(n),icon:p(n),targetScore:l(r),timeLimit:120-10*t,coinReward:Math.floor(15+2*n),disadvantages:m(n),skipPerk:N(n)})}return e})();return u.jsxs("div",{style:{width:"100vw",height:"calc(var(--vh, 1vh) * 100)",background:"var(--color-bg)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",position:"fixed",top:0,left:0},children:[u.jsxs("div",{style:{marginBottom:"20px",fontSize:"24px",fontWeight:"bold",color:"var(--color-text)",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace",textTransform:"uppercase",textAlign:"center"},children:["[>] LEVEL ",o.currentLevel," [<]"]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",maxWidth:"500px",marginBottom:"20px",fontSize:"16px",fontWeight:"bold",color:"var(--color-text)",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace"},children:[u.jsxs("div",{children:["RUN: ",o.currentRun]}),u.jsxs("div",{children:["LEVEL: ",o.currentLevel,"/",o.maxLevel]}),u.jsxs("div",{children:["[C] ",o.coins]})]}),o.activePerks&&o.activePerks.length>0&&u.jsxs("div",{style:{background:"var(--color-accent)",borderBottom:"3px solid var(--color-text)",padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",overflowX:"auto",flexShrink:0},children:[u.jsx("div",{style:{fontSize:"14px",color:"var(--color-bg)",fontWeight:"bold",textTransform:"uppercase",flexShrink:0},children:"POWER CARDS:"}),o.activePerks.map((e,t)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",background:"var(--color-bg)",border:"2px solid var(--color-text)",padding:"4px 8px",borderRadius:"0",flexShrink:0,fontSize:"12px",color:"var(--color-text)",fontWeight:"bold"},children:[u.jsx("span",{children:A(e.name)}),u.jsx("span",{style:{fontSize:"10px"},children:e.name})]},e.id))]}),u.jsx("div",{style:{width:"100%",maxWidth:"500px",marginBottom:"20px"},children:u.jsxs("div",{className:"gb-button",onClick:()=>{i(f.type),setTimeout(()=>(e=>{const o={id:`${e.type}-${Date.now()}`,type:e.type,name:e.name,description:e.description,targetScore:e.targetScore,maxWords:20,timeLimit:e.timeLimit,coinReward:e.coinReward,disadvantages:e.disadvantages,skipPerk:e.skipPerk,specialRule:null,canSkip:!0};t(o)})(f),100)},style:{background:r===f.type?"var(--color-text)":"var(--color-bg)",color:r===f.type?"var(--color-bg)":"var(--color-text)",border:"4px solid var(--color-text)",padding:"20px",fontSize:"16px",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace",fontWeight:"bold",textTransform:"uppercase",cursor:"pointer",textAlign:"left",width:"100%"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[u.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold"},children:[f.icon," ",f.name]}),u.jsxs("div",{style:{fontSize:"14px"},children:["[C] ",f.coinReward]})]}),u.jsx("div",{style:{fontSize:"14px",marginBottom:"12px",fontWeight:"normal"},children:f.description}),u.jsxs("div",{style:{fontSize:"12px",display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[u.jsxs("div",{children:["Target: ",f.targetScore," pts"]}),u.jsxs("div",{children:["Time: ",f.timeLimit,"s"]})]}),u.jsxs("div",{style:{marginBottom:"12px"},children:[u.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"4px",color:"var(--color-accent)"},children:"DISADVANTAGES:"}),f.disadvantages.map((e,t)=>u.jsxs("div",{style:{fontSize:"11px",marginBottom:"2px",color:"var(--color-accent)"},children:["• ",e]},t))]}),u.jsxs("div",{style:{background:"var(--color-accent)",padding:"8px",border:"2px solid var(--color-text)"},children:[u.jsxs("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"4px",color:"var(--color-bg)"},children:["SKIP PERK: ",f.skipPerk.name]}),u.jsx("div",{style:{fontSize:"11px",color:"var(--color-bg)"},children:f.skipPerk.description})]})]})}),u.jsxs("div",{style:{width:"100%",maxWidth:"500px",marginBottom:"20px"},children:[u.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"var(--color-text)",marginBottom:"10px",textAlign:"center"},children:"FUTURE LEVELS:"}),h.map((e,t)=>u.jsxs("div",{style:{marginBottom:"8px"},children:[u.jsxs("div",{className:"gb-button",onClick:()=>s(a===e.level?null:e.level),style:{background:"var(--color-bg)",color:"var(--color-text)",border:"2px solid var(--color-text)",padding:"8px 12px",fontSize:"12px",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace",fontWeight:"bold",textTransform:"uppercase",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:["LEVEL ",e.level,": ",e.name]}),u.jsx("div",{children:a===e.level?"[-]":"[+]"})]}),a===e.level&&u.jsxs("div",{style:{background:"var(--color-accent)",border:"2px solid var(--color-text)",padding:"12px",marginTop:"2px",fontSize:"11px",color:"var(--color-bg)"},children:[u.jsx("div",{style:{marginBottom:"8px"},children:u.jsx("strong",{children:e.description})}),u.jsxs("div",{style:{marginBottom:"8px"},children:["Target: ",e.targetScore," pts | Time: ",e.timeLimit,"s | Coins: ",e.coinReward]}),u.jsxs("div",{style:{marginBottom:"8px"},children:[u.jsx("strong",{children:"Disadvantages:"}),e.disadvantages.map((e,t)=>u.jsxs("div",{style:{marginLeft:"8px"},children:["• ",e]},t))]}),u.jsxs("div",{children:[u.jsx("strong",{children:"Skip Perk:"})," ",e.skipPerk.name," - ",e.skipPerk.description]})]})]},e.level))]}),u.jsx("div",{style:{textAlign:"center"},children:u.jsx("button",{className:"gb-button",onClick:()=>{n({type:"SKIP_LEVEL",payload:{level:o.currentLevel,perk:f.skipPerk}})},style:{padding:"12px 24px",fontSize:"14px",background:"var(--color-accent)",color:"var(--color-bg)",border:"3px solid var(--color-text)",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace",fontWeight:"bold",textTransform:"uppercase",cursor:"pointer"},children:"[!] SKIP LEVEL (Get Perk, No Coins)"})})]})}function z(){var t,o;const{gameState:n,dispatch:r}=S(),[i,a]=e.useState(0),[s,l]=e.useState((null==(t=n.currentChallenge)?void 0:t.timeLimit)||120),[c,d]=e.useState([]),[p,m]=e.useState("");e.useState(null),e.useState([]);const[f,h]=e.useState(0),[g,x]=e.useState("");e.useEffect(()=>{const e=setInterval(()=>{l(e=>e<=1?(y(),0):e-1)},1e3);return()=>clearInterval(e)},[]);const y=e=>{var t,o;const a=e||i,s=(null==(t=n.currentChallenge)?void 0:t.targetScore)||500,l=(null==(o=n.currentChallenge)?void 0:o.coinReward)||20;if(a>=s){const e=l+Math.floor(a/100);r({type:"COMPLETE_LEVEL",payload:{score:a,coins:e}})}else r({type:"GAME_OVER"})};return u.jsxs("div",{style:{width:"100vw",height:"calc(var(--vh, 1vh) * 100)",display:"flex",flexDirection:"column",background:"#9BBB0F",overflow:"hidden",position:"fixed",top:0,left:0},children:[u.jsxs("div",{style:{background:"transparent",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"calc(env(safe-area-inset-top, 0px) + 20px)",paddingBottom:"10px",paddingLeft:"12px",paddingRight:"12px",minHeight:"120px"},children:[u.jsx("div",{style:{fontSize:"16px",color:"#0F380F",fontWeight:"bold",marginBottom:"8px",textAlign:"center"},children:"Word Hunt"}),u.jsxs("div",{style:{fontSize:"24px",color:"#0F380F",fontWeight:"bold",marginBottom:"16px",textAlign:"center"},children:["Level ",n.currentLevel]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",maxWidth:"320px",marginBottom:"12px"},children:[u.jsxs("div",{style:{fontSize:"18px",color:"#0F380F",fontWeight:"bold"},children:["◉",n.coins]}),u.jsx("div",{style:{fontSize:"48px",color:"#0F380F",fontWeight:"bold",textAlign:"center"},children:i}),u.jsxs("div",{style:{fontSize:"18px",color:"#0F380F",fontWeight:"bold"},children:[Math.floor(s/60),":",(s%60).toString().padStart(2,"0")]})]}),u.jsx("div",{style:{width:"200px",height:"12px",background:"#0F380F",border:"2px solid #0F380F",position:"relative"},children:u.jsx("div",{style:{width:`${Math.min(100,i/((null==(o=n.currentChallenge)?void 0:o.targetScore)||1)*100)}%`,height:"100%",background:"#9BBB0F",transition:"width 0.3s ease"}})})]}),u.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:0},children:u.jsx(R,{onWordFound:(e,t)=>{var o;if(n.currentChallenge&&c.includes(e))return x("Word already found!"),void setTimeout(()=>x(""),2e3);r({type:"SUBMIT_WORD",payload:{word:e,positions:[],timeTaken:0}});const i=[...c,e];d(i);const s=(null==(o=n.challengeProgress)?void 0:o.currentScore)||0;a(s),n.lastWordEffects&&n.lastWordEffects.length>0?x(`${e.toUpperCase()} found! ${n.lastWordEffects.join(" ")}`):x(`${e.toUpperCase()} found! +${t} points`),setTimeout(()=>x(""),3e3),n.currentChallenge&&s>=n.currentChallenge.targetScore&&y(s)},onScoreUpdate:e=>{},onCurrentWordChange:e=>{m(e)},timeRemaining:s,hideWordDisplay:!0,foundWords:c},f)}),u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",paddingBottom:"calc(16px + env(safe-area-inset-bottom, 0px))",background:"transparent"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[u.jsx("div",{style:{fontSize:"14px",color:"#0F380F",fontWeight:"bold",marginBottom:"8px"},children:"Power Cards"}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.inventory.slice(0,3).map((e,t)=>u.jsx("div",{style:{width:"40px",height:"40px",background:"#0F380F",border:"2px solid #0F380F",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:A(e.name)},e.id)),Array.from({length:Math.max(0,3-n.inventory.length)}).map((e,t)=>u.jsx("div",{style:{width:"40px",height:"40px",background:"#0F380F",border:"2px solid #0F380F",opacity:.3}},`empty-${t}`))]})]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:u.jsx("button",{onClick:()=>{n.coins>=10&&(r({type:"SPEND_COINS",payload:10}),h(e=>e+1))},disabled:n.coins<10,style:{background:n.coins>=10?"#0F380F":"#666",color:n.coins>=10?"#9BBB0F":"#999",border:"2px solid #0F380F",padding:"8px 16px",fontSize:"16px",fontWeight:"bold",cursor:n.coins>=10?"pointer":"not-allowed"},children:"⟲ 10◉"})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[u.jsx("div",{style:{fontSize:"14px",color:"#0F380F",fontWeight:"bold",marginBottom:"8px"},children:"Words:"}),u.jsx("div",{style:{fontSize:"24px",color:"#0F380F",fontWeight:"bold"},children:c.length})]})]}),g&&u.jsx("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,background:"#0F380F",color:"#9BBB0F",border:"3px solid #0F380F",padding:"16px",fontSize:"18px",fontWeight:"bold",textAlign:"center",maxWidth:"80%",animation:"fadeInOut 3s ease-in-out"},children:g})]})}function G(){var e;const{resetGame:t,gameState:o}=S();return u.jsxs("div",{style:{width:"100vw",height:"calc(var(--vh, 1vh) * 100)",background:"var(--color-bg)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"fixed",top:0,left:0,padding:"20px",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace"},children:[u.jsx("div",{style:{fontSize:"48px",marginBottom:"20px",color:"var(--color-text)",fontWeight:"bold"},children:"[X]"}),u.jsx("div",{style:{fontSize:"32px",color:"var(--color-text)",marginBottom:"20px",fontWeight:"bold",textTransform:"uppercase"},children:"GAME OVER"}),u.jsx("div",{style:{fontSize:"18px",color:"var(--color-text)",marginBottom:"20px",fontWeight:"bold",textAlign:"center"},children:"BETTER LUCK NEXT TIME!"}),u.jsxs("div",{style:{fontSize:"14px",color:"var(--color-text)",marginBottom:"30px",textAlign:"center"},children:["YOU NEEDED ",null==(e=o.currentChallenge)?void 0:e.targetScore," POINTS TO WIN"]}),u.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[u.jsx("button",{onClick:t,className:"gb-button",style:{fontSize:"16px",padding:"12px 20px"},children:"[R] TRY AGAIN"}),u.jsx("button",{onClick:()=>window.location.reload(),className:"gb-button",style:{fontSize:"16px",padding:"12px 20px"},children:"[H] MAIN MENU"})]})]})}function D(){var e;const{gameState:t,resetGame:o}=S();return u.jsxs("div",{style:{width:"100vw",height:"calc(var(--vh, 1vh) * 100)",background:"var(--color-bg)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"fixed",top:0,left:0,padding:"20px",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace"},children:[u.jsx("div",{style:{fontSize:"64px",marginBottom:"20px",color:"var(--color-text)",fontWeight:"bold"},children:"[!]"}),u.jsx("div",{style:{fontSize:"32px",color:"var(--color-text)",marginBottom:"20px",fontWeight:"bold",textTransform:"uppercase"},children:"VICTORY!"}),u.jsx("div",{style:{fontSize:"18px",color:"var(--color-text)",marginBottom:"20px",fontWeight:"bold",textAlign:"center"},children:"[*] CHALLENGE COMPLETE! [*]"}),u.jsxs("div",{style:{fontSize:"16px",margin:"20px 0",color:"var(--color-text)",fontWeight:"bold"},children:["[C] COINS EARNED: ",(null==(e=t.currentChallenge)?void 0:e.coinReward)||20]}),u.jsx("div",{style:{fontSize:"14px",color:"var(--color-text)",marginBottom:"30px",textAlign:"center"},children:"READY FOR THE NEXT CHALLENGE?"}),u.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[u.jsx("button",{onClick:o,className:"gb-button",style:{fontSize:"16px",padding:"12px 20px",background:"var(--color-text)",color:"var(--color-bg)"},children:"[>] CONTINUE"}),u.jsx("button",{onClick:()=>window.location.reload(),className:"gb-button",style:{fontSize:"16px",padding:"12px 20px"},children:"[H] MAIN MENU"})]})]})}function U(){const{gameState:e,dispatch:t}=S();return u.jsxs("div",{style:{width:"100vw",height:"calc(var(--vh, 1vh) * 100)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"var(--color-bg)",padding:"20px",position:"fixed",top:0,left:0},children:[u.jsx("div",{style:{marginBottom:"40px",fontSize:"32px",fontWeight:"bold",color:"var(--color-text)",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace",textTransform:"uppercase",textAlign:"center"},children:"[!] RUN COMPLETE [!]"}),u.jsxs("div",{style:{background:"var(--color-accent)",border:"3px solid var(--color-text)",padding:"30px",marginBottom:"40px",textAlign:"center",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace",color:"var(--color-bg)",minWidth:"300px"},children:[u.jsxs("div",{style:{fontSize:"18px",marginBottom:"20px",fontWeight:"bold"},children:["RUN #",e.currentRun," COMPLETED"]}),u.jsxs("div",{style:{fontSize:"16px",marginBottom:"10px"},children:["LEVELS COMPLETED: ",e.maxLevel]}),u.jsxs("div",{style:{fontSize:"16px",marginBottom:"10px"},children:["FINAL SCORE: ",e.totalScore]}),u.jsxs("div",{style:{fontSize:"16px",marginBottom:"10px"},children:["COINS EARNED: ",e.coins]}),u.jsxs("div",{style:{fontSize:"16px",marginBottom:"10px"},children:["INVENTORY: ",e.inventory.length," ITEMS"]}),u.jsxs("div",{style:{fontSize:"16px"},children:["DIFFICULTY: ",e.difficultyStake.toUpperCase()]})]}),u.jsxs("div",{style:{display:"flex",gap:"20px",flexDirection:"column",alignItems:"center"},children:[u.jsx("button",{className:"gb-button",onClick:()=>{t({type:"START_NEW_RUN",payload:{stake:e.difficultyStake}})},style:{fontSize:"18px",padding:"16px 32px",background:"var(--color-text)",color:"var(--color-bg)",border:"3px solid var(--color-text)",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace",fontWeight:"bold",textTransform:"uppercase",cursor:"pointer",minWidth:"200px"},children:"NEW RUN [>]"}),u.jsx("button",{className:"gb-button",onClick:()=>{t({type:"RESET_GAME"})},style:{fontSize:"16px",padding:"12px 24px",background:"var(--color-bg)",color:"var(--color-text)",border:"3px solid var(--color-text)",fontFamily:"'Courier New', 'Monaco', 'Menlo', monospace",fontWeight:"bold",textTransform:"uppercase",cursor:"pointer",minWidth:"200px"},children:"MAIN MENU"})]})]})}function _(){const{gameState:t,purchaseInventoryItem:o,sellInventoryItem:n,dispatch:r}=S(),[i,a]=e.useState(null),[s,l]=e.useState(!1),[c,d]=e.useState([]),[p,m]=e.useState(5),f=()=>{const e=[],o=t.currentLevel;for(let t=0;t<6;t++){const n=V(),r=H(n,o),i=Math.floor(.6*r),a=N(o),s={id:`shop-${Date.now()}-${t}`,name:a.name,description:a.description,rarity:n,cost:r,sellValue:i,effect:{type:"letterMultiplier",value:1.5},emoji:A(a.name),purchaseLevel:o,timesUsed:0,stackCount:1};e.push(s)}d(e)};e.useEffect(()=>{f()},[t.currentLevel]);const h=()=>{l(!1),a(null)};return u.jsxs("div",{style:{width:"100vw",height:"calc(var(--vh, 1vh) * 100)",background:"#9BBB0F",display:"flex",flexDirection:"column",overflow:"hidden",position:"fixed",top:0,left:0},children:[u.jsxs("div",{style:{background:"#9BBB0F",padding:"20px",paddingTop:"calc(env(safe-area-inset-top, 0px) + 20px)",borderBottom:"3px solid #0F380F",flexShrink:0},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[u.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0F380F"},children:"POWER SHOP"}),u.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#0F380F"},children:["◉ ",t.coins]})]}),u.jsxs("div",{style:{fontSize:"16px",color:"#0F380F",fontWeight:"bold",textAlign:"center"},children:["Level ",t.currentLevel," • Choose your power cards wisely"]})]}),u.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",minHeight:0},children:[u.jsx("div",{style:{flex:1,padding:"20px",overflow:"auto",display:"flex",flexDirection:"column",gap:"16px"},children:u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",width:"100%"},children:c.map((e,t)=>u.jsxs("div",{onClick:()=>(e=>{a(e),l(!0)})(e),style:{background:"#9BBB0F",border:"3px solid #0F380F",padding:"16px",cursor:"pointer",minHeight:"120px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#0F380F",marginBottom:"8px"},children:[A(e.name)," ",e.name]}),u.jsx("div",{style:{fontSize:"12px",color:"#0F380F",marginBottom:"12px",lineHeight:1.3},children:e.description})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#0F380F"},children:["◉ ",e.cost]}),u.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#0F380F",textTransform:"uppercase"},children:e.rarity})]})]},e.id))})}),t.inventory.length>0&&u.jsxs("div",{style:{background:"#8BAC0F",borderTop:"3px solid #0F380F",padding:"16px",flexShrink:0},children:[u.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#0F380F",marginBottom:"12px"},children:"Your Power Cards"}),u.jsx("div",{style:{display:"flex",gap:"12px",overflowX:"auto",paddingBottom:"8px"},children:t.inventory.map((e,t)=>u.jsxs("div",{style:{background:"#9BBB0F",border:"2px solid #0F380F",padding:"12px",minWidth:"150px",flexShrink:0,display:"flex",flexDirection:"column",gap:"8px"},children:[u.jsxs("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#0F380F"},children:[A(e.name)," ",e.name]}),u.jsxs("button",{onClick:()=>{return t=e.id,void n(t);var t},style:{background:"#0F380F",color:"#9BBB0F",border:"2px solid #0F380F",padding:"4px 8px",fontSize:"12px",fontWeight:"bold",cursor:"pointer"},children:["SELL ◉",e.sellValue]})]},e.id))})]})]}),u.jsxs("div",{style:{background:"#9BBB0F",borderTop:"3px solid #0F380F",padding:"16px",paddingBottom:"calc(16px + env(safe-area-inset-bottom, 0px))",display:"flex",gap:"12px",justifyContent:"center",flexShrink:0},children:[u.jsxs("button",{onClick:()=>{t.coins>=p&&(r({type:"SPEND_COINS",payload:p}),f(),m(e=>e+2))},disabled:t.coins<p,className:"gb-button",style:{background:t.coins>=p?"#0F380F":"#8BAC0F",color:t.coins>=p?"#9BBB0F":"#0F380F",opacity:t.coins>=p?1:.5},children:["REROLL ◉",p]}),u.jsx("button",{onClick:()=>{r({type:"LEAVE_SHOP"})},className:"gb-button",style:{background:"#0F380F",color:"#9BBB0F"},children:"CONTINUE"})]}),s&&i&&u.jsx("div",{className:"gb-modal",children:u.jsxs("div",{className:"gb-modal-content",style:{background:"#9BBB0F",border:"4px solid #0F380F",maxWidth:"400px",width:"90%"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[u.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#0F380F"},children:[A(i.name)," ",i.name]}),u.jsx("button",{onClick:h,style:{background:"transparent",border:"none",fontSize:"20px",color:"#0F380F",cursor:"pointer",fontWeight:"bold"},children:"✕"})]}),u.jsx("div",{style:{fontSize:"14px",color:"#0F380F",marginBottom:"16px",lineHeight:1.4},children:i.description}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[u.jsxs("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#0F380F"},children:["Cost: ◉ ",i.cost]}),u.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#0F380F",textTransform:"uppercase"},children:i.rarity})]}),u.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[u.jsxs("button",{onClick:()=>{return e=i,void(t.coins>=e.cost&&o(e)&&(d(t=>t.filter(t=>t.id!==e.id)),h()));var e},disabled:t.coins<i.cost,className:"gb-button",style:{background:t.coins>=i.cost?"#0F380F":"#8BAC0F",color:t.coins>=i.cost?"#9BBB0F":"#0F380F",opacity:t.coins>=i.cost?1:.5},children:["BUY ◉",i.cost]}),u.jsx("button",{onClick:h,className:"gb-button",style:{background:"#8BAC0F",color:"#0F380F"},children:"CANCEL"})]})]})})]})}function V(){const e=Math.random();return e<.7?"common":e<.95?"uncommon":e<.99?"rare":"legendary"}function H(e,t){return Math.floor({common:10,uncommon:25,rare:60,legendary:150}[e]*(1+.2*t))}function $(){const{gameState:t}=S();return e.useEffect(()=>{W().then(e=>{}),document.documentElement.setAttribute("data-theme","retro");const e=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),getComputedStyle(document.documentElement).getPropertyValue("--safe-area-inset-top"),getComputedStyle(document.documentElement).getPropertyValue("--safe-area-inset-bottom")};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),t.gameStarted&&"menu"!==t.gamePhase?u.jsx("div",{className:"game-screen crt-effect",children:u.jsx("div",{className:"pixel-container",children:u.jsx(T,{})})}):u.jsx("div",{className:"game-screen crt-effect",children:u.jsx("div",{className:"pixel-container",children:u.jsx(k,{})})})}function J(){return u.jsx("div",{className:"crt-screen",children:u.jsx(w,{children:u.jsx(y,{children:u.jsx($,{})})})})}m.createRoot(document.getElementById("root")).render(u.jsx(o.StrictMode,{children:u.jsx(J,{})}));
